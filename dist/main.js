/*! For license information please see main.js.LICENSE.txt */
(()=>{var t={933:(t,e,r)=>{"use strict";r.r(e),r.d(e,{isAnyArray:()=>o});const n=Object.prototype.toString;function o(t){const e=n.call(t);return e.endsWith("Array]")&&!e.includes("Big")}},192:(t,e,r)=>{var n=r(580).Symbol;t.exports=n},129:t=>{t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}},389:(t,e,r)=>{var n=r(192),o=r(468),s=r(859),i=n?n.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":i&&i in Object(t)?o(t):s(t)}},713:(t,e,r)=>{var n=r(192),o=r(129),s=r(224),i=r(469),a=n?n.prototype:void 0,u=a?a.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(s(e))return o(e,t)+"";if(i(e))return u?u.call(e):"";var r=e+"";return"0"==r&&1/e==-1/0?"-0":r}},877:(t,e,r)=>{var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;t.exports=n},468:(t,e,r)=>{var n=r(192),o=Object.prototype,s=o.hasOwnProperty,i=o.toString,a=n?n.toStringTag:void 0;t.exports=function(t){var e=s.call(t,a),r=t[a];try{t[a]=void 0;var n=!0}catch(t){}var o=i.call(t);return n&&(e?t[a]=r:delete t[a]),o}},859:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},580:(t,e,r)=>{var n=r(877),o="object"==typeof self&&self&&self.Object===Object&&self,s=n||o||Function("return this")();t.exports=s},224:t=>{var e=Array.isArray;t.exports=e},13:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},469:(t,e,r)=>{var n=r(389),o=r(13);t.exports=function(t){return"symbol"==typeof t||o(t)&&"[object Symbol]"==n(t)}},137:(t,e,r)=>{var n=r(713);t.exports=function(t){return null==t?"":n(t)}},779:(t,e,r)=>{var n=r(137),o=0;t.exports=function(t){var e=++o;return n(t)+e}},862:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>o});var n=r(933);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,n.isAnyArray)(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");if(void 0!==r.output){if(!(0,n.isAnyArray)(r.output))throw new TypeError("output option must be an array if specified");e=r.output}else e=new Array(t.length);var o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,n.isAnyArray)(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var r=e.fromIndex,o=void 0===r?0:r,s=e.toIndex,i=void 0===s?t.length:s;if(o<0||o>=t.length||!Number.isInteger(o))throw new Error("fromIndex must be a positive integer smaller than length");if(i<=o||i>t.length||!Number.isInteger(i))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=t[o],u=o+1;u<i;u++)t[u]<a&&(a=t[u]);return a}(t),s=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,n.isAnyArray)(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var r=e.fromIndex,o=void 0===r?0:r,s=e.toIndex,i=void 0===s?t.length:s;if(o<0||o>=t.length||!Number.isInteger(o))throw new Error("fromIndex must be a positive integer smaller than length");if(i<=o||i>t.length||!Number.isInteger(i))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=t[o],u=o+1;u<i;u++)t[u]>a&&(a=t[u]);return a}(t);if(o===s)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var i=r.min,a=void 0===i?r.autoMinMax?o:0:i,u=r.max,h=void 0===u?r.autoMinMax?s:1:u;if(a>=h)throw new RangeError("min option must be smaller than max option");for(var l=(h-a)/(s-o),c=0;c<t.length;c++)e[c]=(t[c]-o)*l+a;return e}},868:(t,e,r)=>{"use strict";var n=r(933),o=r(862);const s=" ".repeat(2),i=" ".repeat(4);function a(t,e={}){const{maxRows:r=15,maxColumns:n=10,maxNumSize:o=8,padMinus:a="auto"}=e;return`${t.constructor.name} {\n${s}[\n${i}${function(t,e,r,n,o){const{rows:s,columns:a}=t,h=Math.min(s,e),l=Math.min(a,r),c=[];if("auto"===o){o=!1;t:for(let e=0;e<h;e++)for(let r=0;r<l;r++)if(t.get(e,r)<0){o=!0;break t}}for(let e=0;e<h;e++){let r=[];for(let s=0;s<l;s++)r.push(u(t.get(e,s),n,o));c.push(`${r.join(" ")}`)}return l!==a&&(c[c.length-1]+=` ... ${a-r} more columns`),h!==s&&c.push(`... ${s-e} more rows`),c.join(`\n${i}`)}(t,r,n,o,a)}\n${s}]\n${s}rows: ${t.rows}\n${s}columns: ${t.columns}\n}`}function u(t,e,r){return(t>=0&&r?` ${h(t,e-1)}`:h(t,e)).padEnd(e)}function h(t,e){let r=t.toString();if(r.length<=e)return r;let n=t.toFixed(e);if(n.length>e&&(n=t.toFixed(Math.max(0,e-(n.length-e)))),n.length<=e&&!n.startsWith("0.000")&&!n.startsWith("-0.000"))return n;let o=t.toExponential(e);return o.length>e&&(o=t.toExponential(Math.max(0,e-(o.length-e)))),o.slice(0)}function l(t,e,r){let n=r?t.rows:t.rows-1;if(e<0||e>n)throw new RangeError("Row index out of range")}function c(t,e,r){let n=r?t.columns:t.columns-1;if(e<0||e>n)throw new RangeError("Column index out of range")}function f(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function m(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function g(t,e){if(!n.isAnyArray(e))throw new TypeError("row indices must be an array");for(let r=0;r<e.length;r++)if(e[r]<0||e[r]>=t.rows)throw new RangeError("row indices are out of range")}function p(t,e){if(!n.isAnyArray(e))throw new TypeError("column indices must be an array");for(let r=0;r<e.length;r++)if(e[r]<0||e[r]>=t.columns)throw new RangeError("column indices are out of range")}function d(t,e,r,n,o){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(y("startRow",e),y("endRow",r),y("startColumn",n),y("endColumn",o),e>r||n>o||e<0||e>=t.rows||r<0||r>=t.rows||n<0||n>=t.columns||o<0||o>=t.columns)throw new RangeError("Submatrix indices are out of range")}function w(t,e=0){let r=[];for(let n=0;n<t;n++)r.push(e);return r}function y(t,e){if("number"!=typeof e)throw new TypeError(`${t} must be a number`)}function b(t){if(t.isEmpty())throw new Error("Empty matrix has no elements to index")}class v{static from1DArray(t,e,r){if(t*e!==r.length)throw new RangeError("data length does not match given dimensions");let n=new M(t,e);for(let o=0;o<t;o++)for(let t=0;t<e;t++)n.set(o,t,r[o*e+t]);return n}static rowVector(t){let e=new M(1,t.length);for(let r=0;r<t.length;r++)e.set(0,r,t[r]);return e}static columnVector(t){let e=new M(t.length,1);for(let r=0;r<t.length;r++)e.set(r,0,t[r]);return e}static zeros(t,e){return new M(t,e)}static ones(t,e){return new M(t,e).fill(1)}static rand(t,e,r={}){if("object"!=typeof r)throw new TypeError("options must be an object");const{random:n=Math.random}=r;let o=new M(t,e);for(let r=0;r<t;r++)for(let t=0;t<e;t++)o.set(r,t,n());return o}static randInt(t,e,r={}){if("object"!=typeof r)throw new TypeError("options must be an object");const{min:n=0,max:o=1e3,random:s=Math.random}=r;if(!Number.isInteger(n))throw new TypeError("min must be an integer");if(!Number.isInteger(o))throw new TypeError("max must be an integer");if(n>=o)throw new RangeError("min must be smaller than max");let i=o-n,a=new M(t,e);for(let r=0;r<t;r++)for(let t=0;t<e;t++){let e=n+Math.round(s()*i);a.set(r,t,e)}return a}static eye(t,e,r){void 0===e&&(e=t),void 0===r&&(r=1);let n=Math.min(t,e),o=this.zeros(t,e);for(let t=0;t<n;t++)o.set(t,t,r);return o}static diag(t,e,r){let n=t.length;void 0===e&&(e=n),void 0===r&&(r=e);let o=Math.min(n,e,r),s=this.zeros(e,r);for(let e=0;e<o;e++)s.set(e,e,t[e]);return s}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let r=t.rows,n=t.columns,o=new M(r,n);for(let s=0;s<r;s++)for(let r=0;r<n;r++)o.set(s,r,Math.min(t.get(s,r),e.get(s,r)));return o}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let r=t.rows,n=t.columns,o=new this(r,n);for(let s=0;s<r;s++)for(let r=0;r<n;r++)o.set(s,r,Math.max(t.get(s,r),e.get(s,r)));return o}static checkMatrix(t){return v.isMatrix(t)?t:new M(t)}static isMatrix(t){return null!=t&&"Matrix"===t.klass}get size(){return this.rows*this.columns}apply(t){if("function"!=typeof t)throw new TypeError("callback must be a function");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)t.call(this,e,r);return this}to1DArray(){let t=[];for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)t.push(this.get(e,r));return t}to2DArray(){let t=[];for(let e=0;e<this.rows;e++){t.push([]);for(let r=0;r<this.columns;r++)t[e].push(this.get(e,r))}return t}toJSON(){return this.to2DArray()}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isEmpty(){return 0===this.rows||0===this.columns}isSymmetric(){if(this.isSquare()){for(let t=0;t<this.rows;t++)for(let e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}isDistance(){if(!this.isSymmetric())return!1;for(let t=0;t<this.rows;t++)if(0!==this.get(t,t))return!1;return!0}isEchelonForm(){let t=0,e=0,r=-1,n=!0,o=!1;for(;t<this.rows&&n;){for(e=0,o=!1;e<this.columns&&!1===o;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>r?(o=!0,r=e):(n=!1,o=!0);t++}return n}isReducedEchelonForm(){let t=0,e=0,r=-1,n=!0,o=!1;for(;t<this.rows&&n;){for(e=0,o=!1;e<this.columns&&!1===o;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>r?(o=!0,r=e):(n=!1,o=!0);for(let r=e+1;r<this.rows;r++)0!==this.get(t,r)&&(n=!1);t++}return n}echelonForm(){let t=this.clone(),e=0,r=0;for(;e<t.rows&&r<t.columns;){let n=e;for(let o=e;o<t.rows;o++)t.get(o,r)>t.get(n,r)&&(n=o);if(0===t.get(n,r))r++;else{t.swapRows(e,n);let o=t.get(e,r);for(let n=r;n<t.columns;n++)t.set(e,n,t.get(e,n)/o);for(let n=e+1;n<t.rows;n++){let o=t.get(n,r)/t.get(e,r);t.set(n,r,0);for(let s=r+1;s<t.columns;s++)t.set(n,s,t.get(n,s)-t.get(e,s)*o)}e++,r++}}return t}reducedEchelonForm(){let t=this.echelonForm(),e=t.columns,r=t.rows,n=r-1;for(;n>=0;)if(0===t.maxRow(n))n--;else{let o=0,s=!1;for(;o<r&&!1===s;)1===t.get(n,o)?s=!0:o++;for(let r=0;r<n;r++){let s=t.get(r,o);for(let i=o;i<e;i++){let e=t.get(r,i)-s*t.get(n,i);t.set(r,i,e)}}n--}return t}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(t={}){if("object"!=typeof t)throw new TypeError("options must be an object");const{rows:e=1,columns:r=1}=t;if(!Number.isInteger(e)||e<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(r)||r<=0)throw new TypeError("columns must be a positive integer");let n=new M(this.rows*e,this.columns*r);for(let t=0;t<e;t++)for(let e=0;e<r;e++)n.setSubMatrix(this,this.rows*t,this.columns*e);return n}fill(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,t);return this}neg(){return this.mulS(-1)}getRow(t){l(this,t);let e=[];for(let r=0;r<this.columns;r++)e.push(this.get(t,r));return e}getRowVector(t){return M.rowVector(this.getRow(t))}setRow(t,e){l(this,t),e=f(this,e);for(let r=0;r<this.columns;r++)this.set(t,r,e[r]);return this}swapRows(t,e){l(this,t),l(this,e);for(let r=0;r<this.columns;r++){let n=this.get(t,r);this.set(t,r,this.get(e,r)),this.set(e,r,n)}return this}getColumn(t){c(this,t);let e=[];for(let r=0;r<this.rows;r++)e.push(this.get(r,t));return e}getColumnVector(t){return M.columnVector(this.getColumn(t))}setColumn(t,e){c(this,t),e=m(this,e);for(let r=0;r<this.rows;r++)this.set(r,t,e[r]);return this}swapColumns(t,e){c(this,t),c(this,e);for(let r=0;r<this.rows;r++){let n=this.get(r,t);this.set(r,t,this.get(r,e)),this.set(r,e,n)}return this}addRowVector(t){t=f(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[r]);return this}subRowVector(t){t=f(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[r]);return this}mulRowVector(t){t=f(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[r]);return this}divRowVector(t){t=f(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[r]);return this}addColumnVector(t){t=m(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[e]);return this}subColumnVector(t){t=m(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[e]);return this}mulColumnVector(t){t=m(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[e]);return this}divColumnVector(t){t=m(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[e]);return this}mulRow(t,e){l(this,t);for(let r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)*e);return this}mulColumn(t,e){c(this,t);for(let r=0;r<this.rows;r++)this.set(r,t,this.get(r,t)*e);return this}max(t){if(this.isEmpty())return NaN;switch(t){case"row":{const t=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.get(e,r)>t[e]&&(t[e]=this.get(e,r));return t}case"column":{const t=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.get(e,r)>t[r]&&(t[r]=this.get(e,r));return t}case void 0:{let t=this.get(0,0);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.get(e,r)>t&&(t=this.get(e,r));return t}default:throw new Error(`invalid option: ${t}`)}}maxIndex(){b(this);let t=this.get(0,0),e=[0,0];for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.get(r,n)>t&&(t=this.get(r,n),e[0]=r,e[1]=n);return e}min(t){if(this.isEmpty())return NaN;switch(t){case"row":{const t=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.get(e,r)<t[e]&&(t[e]=this.get(e,r));return t}case"column":{const t=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.get(e,r)<t[r]&&(t[r]=this.get(e,r));return t}case void 0:{let t=this.get(0,0);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.get(e,r)<t&&(t=this.get(e,r));return t}default:throw new Error(`invalid option: ${t}`)}}minIndex(){b(this);let t=this.get(0,0),e=[0,0];for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.get(r,n)<t&&(t=this.get(r,n),e[0]=r,e[1]=n);return e}maxRow(t){if(l(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r));return e}maxRowIndex(t){l(this,t),b(this);let e=this.get(t,0),r=[t,0];for(let n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n),r[1]=n);return r}minRow(t){if(l(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r));return e}minRowIndex(t){l(this,t),b(this);let e=this.get(t,0),r=[t,0];for(let n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n),r[1]=n);return r}maxColumn(t){if(c(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t));return e}maxColumnIndex(t){c(this,t),b(this);let e=this.get(0,t),r=[0,t];for(let n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t),r[0]=n);return r}minColumn(t){if(c(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t));return e}minColumnIndex(t){c(this,t),b(this);let e=this.get(0,t),r=[0,t];for(let n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t),r[0]=n);return r}diag(){let t=Math.min(this.rows,this.columns),e=[];for(let r=0;r<t;r++)e.push(this.get(r,r));return e}norm(t="frobenius"){switch(t){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw new RangeError(`unknown norm type: ${t}`)}}cumulativeSum(){let t=0;for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)t+=this.get(e,r),this.set(e,r,t);return this}dot(t){v.isMatrix(t)&&(t=t.to1DArray());let e=this.to1DArray();if(e.length!==t.length)throw new RangeError("vectors do not have the same size");let r=0;for(let n=0;n<e.length;n++)r+=e[n]*t[n];return r}mmul(t){t=M.checkMatrix(t);let e=this.rows,r=this.columns,n=t.columns,o=new M(e,n),s=new Float64Array(r);for(let i=0;i<n;i++){for(let e=0;e<r;e++)s[e]=t.get(e,i);for(let t=0;t<e;t++){let e=0;for(let n=0;n<r;n++)e+=this.get(t,n)*s[n];o.set(t,i,e)}}return o}strassen2x2(t){t=M.checkMatrix(t);let e=new M(2,2);const r=this.get(0,0),n=t.get(0,0),o=this.get(0,1),s=t.get(0,1),i=this.get(1,0),a=t.get(1,0),u=this.get(1,1),h=t.get(1,1),l=(r+u)*(n+h),c=(i+u)*n,f=r*(s-h),m=u*(a-n),g=(r+o)*h,p=l+m-g+(o-u)*(a+h),d=f+g,w=c+m,y=l-c+f+(i-r)*(n+s);return e.set(0,0,p),e.set(0,1,d),e.set(1,0,w),e.set(1,1,y),e}strassen3x3(t){t=M.checkMatrix(t);let e=new M(3,3);const r=this.get(0,0),n=this.get(0,1),o=this.get(0,2),s=this.get(1,0),i=this.get(1,1),a=this.get(1,2),u=this.get(2,0),h=this.get(2,1),l=this.get(2,2),c=t.get(0,0),f=t.get(0,1),m=t.get(0,2),g=t.get(1,0),p=t.get(1,1),d=t.get(1,2),w=t.get(2,0),y=t.get(2,1),b=t.get(2,2),v=(r-s)*(-f+p),x=(-r+s+i)*(c-f+p),E=(s+i)*(-c+f),S=r*c,_=(-r+u+h)*(c-m+d),k=(-r+u)*(m-d),R=(u+h)*(-c+m),A=(-o+h+l)*(p+w-y),I=(o-l)*(p-y),C=o*w,T=(h+l)*(-w+y),L=(-o+i+a)*(d+w-b),N=(o-a)*(d-b),O=(i+a)*(-w+b),j=S+C+n*g,z=(r+n+o-s-i-h-l)*p+x+E+S+A+C+T,F=S+_+R+(r+n+o-i-a-u-h)*d+C+L+O,P=v+i*(-c+f+g-p-d-w+b)+x+S+C+L+N,D=v+x+E+S+a*y,q=C+L+N+O+s*m,V=S+_+k+h*(-c+m+g-p-d-w+y)+A+I+C,U=A+I+C+T+u*f,$=S+_+k+R+l*b;return e.set(0,0,j),e.set(0,1,z),e.set(0,2,F),e.set(1,0,P),e.set(1,1,D),e.set(1,2,q),e.set(2,0,V),e.set(2,1,U),e.set(2,2,$),e}mmulStrassen(t){t=M.checkMatrix(t);let e=this.clone(),r=e.rows,n=e.columns,o=t.rows,s=t.columns;function i(t,e,r){let n=t.rows,o=t.columns;if(n===e&&o===r)return t;{let n=v.zeros(e,r);return n=n.setSubMatrix(t,0,0),n}}n!==o&&console.warn(`Multiplying ${r} x ${n} and ${o} x ${s} matrix: dimensions do not match.`);let a=Math.max(r,o),u=Math.max(n,s);return e=i(e,a,u),function t(e,r,n,o){if(n<=512||o<=512)return e.mmul(r);n%2==1&&o%2==1?(e=i(e,n+1,o+1),r=i(r,n+1,o+1)):n%2==1?(e=i(e,n+1,o),r=i(r,n+1,o)):o%2==1&&(e=i(e,n,o+1),r=i(r,n,o+1));let s=parseInt(e.rows/2,10),a=parseInt(e.columns/2,10),u=e.subMatrix(0,s-1,0,a-1),h=r.subMatrix(0,s-1,0,a-1),l=e.subMatrix(0,s-1,a,e.columns-1),c=r.subMatrix(0,s-1,a,r.columns-1),f=e.subMatrix(s,e.rows-1,0,a-1),m=r.subMatrix(s,r.rows-1,0,a-1),g=e.subMatrix(s,e.rows-1,a,e.columns-1),p=r.subMatrix(s,r.rows-1,a,r.columns-1),d=t(v.add(u,g),v.add(h,p),s,a),w=t(v.add(f,g),h,s,a),y=t(u,v.sub(c,p),s,a),b=t(g,v.sub(m,h),s,a),x=t(v.add(u,l),p,s,a),M=t(v.sub(f,u),v.add(h,c),s,a),E=t(v.sub(l,g),v.add(m,p),s,a),S=v.add(d,b);S.sub(x),S.add(E);let _=v.add(y,x),k=v.add(w,b),R=v.sub(d,w);R.add(y),R.add(M);let A=v.zeros(2*S.rows,2*S.columns);return A=A.setSubMatrix(S,0,0),A=A.setSubMatrix(_,S.rows,0),A=A.setSubMatrix(k,0,S.columns),A=A.setSubMatrix(R,S.rows,S.columns),A.subMatrix(0,n-1,0,o-1)}(e,t=i(t,a,u),a,u)}scaleRows(t={}){if("object"!=typeof t)throw new TypeError("options must be an object");const{min:e=0,max:r=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(r))throw new TypeError("max must be a number");if(e>=r)throw new RangeError("min must be smaller than max");let n=new M(this.rows,this.columns);for(let t=0;t<this.rows;t++){const s=this.getRow(t);s.length>0&&o(s,{min:e,max:r,output:s}),n.setRow(t,s)}return n}scaleColumns(t={}){if("object"!=typeof t)throw new TypeError("options must be an object");const{min:e=0,max:r=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(r))throw new TypeError("max must be a number");if(e>=r)throw new RangeError("min must be smaller than max");let n=new M(this.rows,this.columns);for(let t=0;t<this.columns;t++){const s=this.getColumn(t);s.length&&o(s,{min:e,max:r,output:s}),n.setColumn(t,s)}return n}flipRows(){const t=Math.ceil(this.columns/2);for(let e=0;e<this.rows;e++)for(let r=0;r<t;r++){let t=this.get(e,r),n=this.get(e,this.columns-1-r);this.set(e,r,n),this.set(e,this.columns-1-r,t)}return this}flipColumns(){const t=Math.ceil(this.rows/2);for(let e=0;e<this.columns;e++)for(let r=0;r<t;r++){let t=this.get(r,e),n=this.get(this.rows-1-r,e);this.set(r,e,n),this.set(this.rows-1-r,e,t)}return this}kroneckerProduct(t){t=M.checkMatrix(t);let e=this.rows,r=this.columns,n=t.rows,o=t.columns,s=new M(e*n,r*o);for(let i=0;i<e;i++)for(let e=0;e<r;e++)for(let r=0;r<n;r++)for(let a=0;a<o;a++)s.set(n*i+r,o*e+a,this.get(i,e)*t.get(r,a));return s}kroneckerSum(t){if(t=M.checkMatrix(t),!this.isSquare()||!t.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let e=this.rows,r=t.rows,n=this.kroneckerProduct(M.eye(r,r)),o=M.eye(e,e).kroneckerProduct(t);return n.add(o)}transpose(){let t=new M(this.columns,this.rows);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)t.set(r,e,this.get(e,r));return t}sortRows(t=x){for(let e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t=x){for(let e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,r,n){d(this,t,e,r,n);let o=new M(e-t+1,n-r+1);for(let s=t;s<=e;s++)for(let e=r;e<=n;e++)o.set(s-t,e-r,this.get(s,e));return o}subMatrixRow(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.columns-1),e>r||e<0||e>=this.columns||r<0||r>=this.columns)throw new RangeError("Argument out of range");let n=new M(t.length,r-e+1);for(let o=0;o<t.length;o++)for(let s=e;s<=r;s++){if(t[o]<0||t[o]>=this.rows)throw new RangeError(`Row index out of range: ${t[o]}`);n.set(o,s-e,this.get(t[o],s))}return n}subMatrixColumn(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.rows-1),e>r||e<0||e>=this.rows||r<0||r>=this.rows)throw new RangeError("Argument out of range");let n=new M(r-e+1,t.length);for(let o=0;o<t.length;o++)for(let s=e;s<=r;s++){if(t[o]<0||t[o]>=this.columns)throw new RangeError(`Column index out of range: ${t[o]}`);n.set(s-e,o,this.get(s,t[o]))}return n}setSubMatrix(t,e,r){if((t=M.checkMatrix(t)).isEmpty())return this;d(this,e,e+t.rows-1,r,r+t.columns-1);for(let n=0;n<t.rows;n++)for(let o=0;o<t.columns;o++)this.set(e+n,r+o,t.get(n,o));return this}selection(t,e){g(this,t),p(this,e);let r=new M(t.length,e.length);for(let n=0;n<t.length;n++){let o=t[n];for(let t=0;t<e.length;t++){let s=e[t];r.set(n,t,this.get(o,s))}}return r}trace(){let t=Math.min(this.rows,this.columns),e=0;for(let r=0;r<t;r++)e+=this.get(r,r);return e}clone(){return this.constructor.copy(this,new M(this.rows,this.columns))}static copy(t,e){for(const[r,n,o]of t.entries())e.set(r,n,o);return e}sum(t){switch(t){case"row":return function(t){let e=w(t.rows);for(let r=0;r<t.rows;++r)for(let n=0;n<t.columns;++n)e[r]+=t.get(r,n);return e}(this);case"column":return function(t){let e=w(t.columns);for(let r=0;r<t.rows;++r)for(let n=0;n<t.columns;++n)e[n]+=t.get(r,n);return e}(this);case void 0:return function(t){let e=0;for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)e+=t.get(r,n);return e}(this);default:throw new Error(`invalid option: ${t}`)}}product(t){switch(t){case"row":return function(t){let e=w(t.rows,1);for(let r=0;r<t.rows;++r)for(let n=0;n<t.columns;++n)e[r]*=t.get(r,n);return e}(this);case"column":return function(t){let e=w(t.columns,1);for(let r=0;r<t.rows;++r)for(let n=0;n<t.columns;++n)e[n]*=t.get(r,n);return e}(this);case void 0:return function(t){let e=1;for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)e*=t.get(r,n);return e}(this);default:throw new Error(`invalid option: ${t}`)}}mean(t){const e=this.sum(t);switch(t){case"row":for(let t=0;t<this.rows;t++)e[t]/=this.columns;return e;case"column":for(let t=0;t<this.columns;t++)e[t]/=this.rows;return e;case void 0:return e/this.size;default:throw new Error(`invalid option: ${t}`)}}variance(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");const{unbiased:r=!0,mean:o=this.mean(t)}=e;if("boolean"!=typeof r)throw new TypeError("unbiased must be a boolean");switch(t){case"row":if(!n.isAnyArray(o))throw new TypeError("mean must be an array");return function(t,e,r){const n=t.rows,o=t.columns,s=[];for(let i=0;i<n;i++){let n=0,a=0,u=0;for(let e=0;e<o;e++)u=t.get(i,e)-r[i],n+=u,a+=u*u;e?s.push((a-n*n/o)/(o-1)):s.push((a-n*n/o)/o)}return s}(this,r,o);case"column":if(!n.isAnyArray(o))throw new TypeError("mean must be an array");return function(t,e,r){const n=t.rows,o=t.columns,s=[];for(let i=0;i<o;i++){let o=0,a=0,u=0;for(let e=0;e<n;e++)u=t.get(e,i)-r[i],o+=u,a+=u*u;e?s.push((a-o*o/n)/(n-1)):s.push((a-o*o/n)/n)}return s}(this,r,o);case void 0:if("number"!=typeof o)throw new TypeError("mean must be a number");return function(t,e,r){const n=t.rows,o=t.columns,s=n*o;let i=0,a=0,u=0;for(let e=0;e<n;e++)for(let n=0;n<o;n++)u=t.get(e,n)-r,i+=u,a+=u*u;return e?(a-i*i/s)/(s-1):(a-i*i/s)/s}(this,r,o);default:throw new Error(`invalid option: ${t}`)}}standardDeviation(t,e){"object"==typeof t&&(e=t,t=void 0);const r=this.variance(t,e);if(void 0===t)return Math.sqrt(r);for(let t=0;t<r.length;t++)r[t]=Math.sqrt(r[t]);return r}center(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");const{center:r=this.mean(t)}=e;switch(t){case"row":if(!n.isAnyArray(r))throw new TypeError("center must be an array");return function(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)-e[r])}(this,r),this;case"column":if(!n.isAnyArray(r))throw new TypeError("center must be an array");return function(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)-e[n])}(this,r),this;case void 0:if("number"!=typeof r)throw new TypeError("center must be a number");return function(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)-e)}(this,r),this;default:throw new Error(`invalid option: ${t}`)}}scale(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");let r=e.scale;switch(t){case"row":if(void 0===r)r=function(t){const e=[];for(let r=0;r<t.rows;r++){let n=0;for(let e=0;e<t.columns;e++)n+=t.get(r,e)**2/(t.columns-1);e.push(Math.sqrt(n))}return e}(this);else if(!n.isAnyArray(r))throw new TypeError("scale must be an array");return function(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)/e[r])}(this,r),this;case"column":if(void 0===r)r=function(t){const e=[];for(let r=0;r<t.columns;r++){let n=0;for(let e=0;e<t.rows;e++)n+=t.get(e,r)**2/(t.rows-1);e.push(Math.sqrt(n))}return e}(this);else if(!n.isAnyArray(r))throw new TypeError("scale must be an array");return function(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)/e[n])}(this,r),this;case void 0:if(void 0===r)r=function(t){const e=t.size-1;let r=0;for(let n=0;n<t.columns;n++)for(let o=0;o<t.rows;o++)r+=t.get(o,n)**2/e;return Math.sqrt(r)}(this);else if("number"!=typeof r)throw new TypeError("scale must be a number");return function(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)/e)}(this,r),this;default:throw new Error(`invalid option: ${t}`)}}toString(t){return a(this,t)}[Symbol.iterator](){return this.entries()}*entries(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)yield[t,e,this.get(t,e)]}*values(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)yield this.get(t,e)}}function x(t,e){return t-e}v.prototype.klass="Matrix","undefined"!=typeof Symbol&&(v.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return a(this)}),v.random=v.rand,v.randomInt=v.randInt,v.diagonal=v.diag,v.prototype.diagonal=v.prototype.diag,v.identity=v.eye,v.prototype.negate=v.prototype.neg,v.prototype.tensorProduct=v.prototype.kroneckerProduct;class M extends v{data;#t(t,e){if(this.data=[],!(Number.isInteger(e)&&e>=0))throw new TypeError("nColumns must be a positive integer");for(let r=0;r<t;r++)this.data.push(new Float64Array(e));this.rows=t,this.columns=e}constructor(t,e){if(super(),M.isMatrix(t))this.#t(t.rows,t.columns),M.copy(t,this);else if(Number.isInteger(t)&&t>=0)this.#t(t,e);else{if(!n.isAnyArray(t))throw new TypeError("First argument must be a positive number or an array");{const r=t;if("number"!=typeof(e=(t=r.length)?r[0].length:0))throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let n=0;n<t;n++){if(r[n].length!==e)throw new RangeError("Inconsistent array dimensions");if(!r[n].every((t=>"number"==typeof t)))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(r[n]))}this.rows=t,this.columns=e}}}set(t,e,r){return this.data[t][e]=r,this}get(t,e){return this.data[t][e]}removeRow(t){return l(this,t),this.data.splice(t,1),this.rows-=1,this}addRow(t,e){return void 0===e&&(e=t,t=this.rows),l(this,t,!0),e=Float64Array.from(f(this,e)),this.data.splice(t,0,e),this.rows+=1,this}removeColumn(t){c(this,t);for(let e=0;e<this.rows;e++){const r=new Float64Array(this.columns-1);for(let n=0;n<t;n++)r[n]=this.data[e][n];for(let n=t+1;n<this.columns;n++)r[n-1]=this.data[e][n];this.data[e]=r}return this.columns-=1,this}addColumn(t,e){void 0===e&&(e=t,t=this.columns),c(this,t,!0),e=m(this,e);for(let r=0;r<this.rows;r++){const n=new Float64Array(this.columns+1);let o=0;for(;o<t;o++)n[o]=this.data[r][o];for(n[o++]=e[r];o<this.columns+1;o++)n[o]=this.data[r][o-1];this.data[r]=n}return this.columns+=1,this}}!function(t,e){t.prototype.add=function(t){return"number"==typeof t?this.addS(t):this.addM(t)},t.prototype.addS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t);return this},t.prototype.addM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t.get(e,r));return this},t.add=function(t,r){return new e(t).add(r)},t.prototype.sub=function(t){return"number"==typeof t?this.subS(t):this.subM(t)},t.prototype.subS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t);return this},t.prototype.subM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t.get(e,r));return this},t.sub=function(t,r){return new e(t).sub(r)},t.prototype.subtract=t.prototype.sub,t.prototype.subtractS=t.prototype.subS,t.prototype.subtractM=t.prototype.subM,t.subtract=t.sub,t.prototype.mul=function(t){return"number"==typeof t?this.mulS(t):this.mulM(t)},t.prototype.mulS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t);return this},t.prototype.mulM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t.get(e,r));return this},t.mul=function(t,r){return new e(t).mul(r)},t.prototype.multiply=t.prototype.mul,t.prototype.multiplyS=t.prototype.mulS,t.prototype.multiplyM=t.prototype.mulM,t.multiply=t.mul,t.prototype.div=function(t){return"number"==typeof t?this.divS(t):this.divM(t)},t.prototype.divS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t);return this},t.prototype.divM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t.get(e,r));return this},t.div=function(t,r){return new e(t).div(r)},t.prototype.divide=t.prototype.div,t.prototype.divideS=t.prototype.divS,t.prototype.divideM=t.prototype.divM,t.divide=t.div,t.prototype.mod=function(t){return"number"==typeof t?this.modS(t):this.modM(t)},t.prototype.modS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)%t);return this},t.prototype.modM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)%t.get(e,r));return this},t.mod=function(t,r){return new e(t).mod(r)},t.prototype.modulus=t.prototype.mod,t.prototype.modulusS=t.prototype.modS,t.prototype.modulusM=t.prototype.modM,t.modulus=t.mod,t.prototype.and=function(t){return"number"==typeof t?this.andS(t):this.andM(t)},t.prototype.andS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)&t);return this},t.prototype.andM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)&t.get(e,r));return this},t.and=function(t,r){return new e(t).and(r)},t.prototype.or=function(t){return"number"==typeof t?this.orS(t):this.orM(t)},t.prototype.orS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)|t);return this},t.prototype.orM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)|t.get(e,r));return this},t.or=function(t,r){return new e(t).or(r)},t.prototype.xor=function(t){return"number"==typeof t?this.xorS(t):this.xorM(t)},t.prototype.xorS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)^t);return this},t.prototype.xorM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)^t.get(e,r));return this},t.xor=function(t,r){return new e(t).xor(r)},t.prototype.leftShift=function(t){return"number"==typeof t?this.leftShiftS(t):this.leftShiftM(t)},t.prototype.leftShiftS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)<<t);return this},t.prototype.leftShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)<<t.get(e,r));return this},t.leftShift=function(t,r){return new e(t).leftShift(r)},t.prototype.signPropagatingRightShift=function(t){return"number"==typeof t?this.signPropagatingRightShiftS(t):this.signPropagatingRightShiftM(t)},t.prototype.signPropagatingRightShiftS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)>>t);return this},t.prototype.signPropagatingRightShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)>>t.get(e,r));return this},t.signPropagatingRightShift=function(t,r){return new e(t).signPropagatingRightShift(r)},t.prototype.rightShift=function(t){return"number"==typeof t?this.rightShiftS(t):this.rightShiftM(t)},t.prototype.rightShiftS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)>>>t);return this},t.prototype.rightShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)>>>t.get(e,r));return this},t.rightShift=function(t,r){return new e(t).rightShift(r)},t.prototype.zeroFillRightShift=t.prototype.rightShift,t.prototype.zeroFillRightShiftS=t.prototype.rightShiftS,t.prototype.zeroFillRightShiftM=t.prototype.rightShiftM,t.zeroFillRightShift=t.rightShift,t.prototype.not=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,~this.get(t,e));return this},t.not=function(t){return new e(t).not()},t.prototype.abs=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.abs(this.get(t,e)));return this},t.abs=function(t){return new e(t).abs()},t.prototype.acos=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.acos(this.get(t,e)));return this},t.acos=function(t){return new e(t).acos()},t.prototype.acosh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.acosh(this.get(t,e)));return this},t.acosh=function(t){return new e(t).acosh()},t.prototype.asin=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.asin(this.get(t,e)));return this},t.asin=function(t){return new e(t).asin()},t.prototype.asinh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.asinh(this.get(t,e)));return this},t.asinh=function(t){return new e(t).asinh()},t.prototype.atan=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.atan(this.get(t,e)));return this},t.atan=function(t){return new e(t).atan()},t.prototype.atanh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.atanh(this.get(t,e)));return this},t.atanh=function(t){return new e(t).atanh()},t.prototype.cbrt=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cbrt(this.get(t,e)));return this},t.cbrt=function(t){return new e(t).cbrt()},t.prototype.ceil=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.ceil(this.get(t,e)));return this},t.ceil=function(t){return new e(t).ceil()},t.prototype.clz32=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.clz32(this.get(t,e)));return this},t.clz32=function(t){return new e(t).clz32()},t.prototype.cos=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cos(this.get(t,e)));return this},t.cos=function(t){return new e(t).cos()},t.prototype.cosh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cosh(this.get(t,e)));return this},t.cosh=function(t){return new e(t).cosh()},t.prototype.exp=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.exp(this.get(t,e)));return this},t.exp=function(t){return new e(t).exp()},t.prototype.expm1=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.expm1(this.get(t,e)));return this},t.expm1=function(t){return new e(t).expm1()},t.prototype.floor=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.floor(this.get(t,e)));return this},t.floor=function(t){return new e(t).floor()},t.prototype.fround=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.fround(this.get(t,e)));return this},t.fround=function(t){return new e(t).fround()},t.prototype.log=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log(this.get(t,e)));return this},t.log=function(t){return new e(t).log()},t.prototype.log1p=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log1p(this.get(t,e)));return this},t.log1p=function(t){return new e(t).log1p()},t.prototype.log10=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log10(this.get(t,e)));return this},t.log10=function(t){return new e(t).log10()},t.prototype.log2=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log2(this.get(t,e)));return this},t.log2=function(t){return new e(t).log2()},t.prototype.round=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.round(this.get(t,e)));return this},t.round=function(t){return new e(t).round()},t.prototype.sign=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sign(this.get(t,e)));return this},t.sign=function(t){return new e(t).sign()},t.prototype.sin=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sin(this.get(t,e)));return this},t.sin=function(t){return new e(t).sin()},t.prototype.sinh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sinh(this.get(t,e)));return this},t.sinh=function(t){return new e(t).sinh()},t.prototype.sqrt=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sqrt(this.get(t,e)));return this},t.sqrt=function(t){return new e(t).sqrt()},t.prototype.tan=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.tan(this.get(t,e)));return this},t.tan=function(t){return new e(t).tan()},t.prototype.tanh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.tanh(this.get(t,e)));return this},t.tanh=function(t){return new e(t).tanh()},t.prototype.trunc=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.trunc(this.get(t,e)));return this},t.trunc=function(t){return new e(t).trunc()},t.pow=function(t,r){return new e(t).pow(r)},t.prototype.pow=function(t){return"number"==typeof t?this.powS(t):this.powM(t)},t.prototype.powS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)**t);return this},t.prototype.powM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)**t.get(e,r));return this}}(v,M);class E extends v{#e;get size(){return this.#e.size}get rows(){return this.#e.rows}get columns(){return this.#e.columns}get diagonalSize(){return this.rows}static isSymmetricMatrix(t){return M.isMatrix(t)&&"SymmetricMatrix"===t.klassType}static zeros(t){return new this(t)}static ones(t){return new this(t).fill(1)}constructor(t){if(super(),M.isMatrix(t)){if(!t.isSymmetric())throw new TypeError("not symmetric data");this.#e=M.copy(t,new M(t.rows,t.rows))}else if(Number.isInteger(t)&&t>=0)this.#e=new M(t,t);else if(this.#e=new M(t),!this.isSymmetric())throw new TypeError("not symmetric data")}clone(){const t=new E(this.diagonalSize);for(const[e,r,n]of this.upperRightEntries())t.set(e,r,n);return t}toMatrix(){return new M(this)}get(t,e){return this.#e.get(t,e)}set(t,e,r){return this.#e.set(t,e,r),this.#e.set(e,t,r),this}removeCross(t){return this.#e.removeRow(t),this.#e.removeColumn(t),this}addCross(t,e){void 0===e&&(e=t,t=this.diagonalSize);const r=e.slice();return r.splice(t,1),this.#e.addRow(t,r),this.#e.addColumn(t,e),this}applyMask(t){if(t.length!==this.diagonalSize)throw new RangeError("Mask size do not match with matrix size");const e=[];for(const[r,n]of t.entries())n||e.push(r);e.reverse();for(const t of e)this.removeCross(t);return this}toCompact(){const{diagonalSize:t}=this,e=new Array(t*(t+1)/2);for(let r=0,n=0,o=0;o<e.length;o++)e[o]=this.get(n,r),++r>=t&&(r=++n);return e}static fromCompact(t){const e=t.length,r=(Math.sqrt(8*e+1)-1)/2;if(!Number.isInteger(r))throw new TypeError(`This array is not a compact representation of a Symmetric Matrix, ${JSON.stringify(t)}`);const n=new E(r);for(let o=0,s=0,i=0;i<e;i++)n.set(o,s,t[i]),++o>=r&&(o=++s);return n}*upperRightEntries(){for(let t=0,e=0;t<this.diagonalSize;void 0){const r=this.get(t,e);yield[t,e,r],++e>=this.diagonalSize&&(e=++t)}}*upperRightValues(){for(let t=0,e=0;t<this.diagonalSize;void 0){const r=this.get(t,e);yield r,++e>=this.diagonalSize&&(e=++t)}}}E.prototype.klassType="SymmetricMatrix";class S extends E{static isDistanceMatrix(t){return E.isSymmetricMatrix(t)&&"DistanceMatrix"===t.klassSubType}constructor(t){if(super(t),!this.isDistance())throw new TypeError("Provided arguments do no produce a distance matrix")}set(t,e,r){return t===e&&(r=0),super.set(t,e,r)}addCross(t,e){return void 0===e&&(e=t,t=this.diagonalSize),(e=e.slice())[t]=0,super.addCross(t,e)}toSymmetricMatrix(){return new E(this)}clone(){const t=new S(this.diagonalSize);for(const[e,r,n]of this.upperRightEntries())e!==r&&t.set(e,r,n);return t}toCompact(){const{diagonalSize:t}=this,e=new Array((t-1)*t/2);for(let r=1,n=0,o=0;o<e.length;o++)e[o]=this.get(n,r),++r>=t&&(r=1+ ++n);return e}static fromCompact(t){const e=t.length;if(0===e)return new this(0);const r=(Math.sqrt(8*e+1)+1)/2;if(!Number.isInteger(r))throw new TypeError(`This array is not a compact representation of a DistanceMatrix, ${JSON.stringify(t)}`);const n=new this(r);for(let o=1,s=0,i=0;i<e;i++)n.set(o,s,t[i]),++o>=r&&(o=1+ ++s);return n}}S.prototype.klassSubType="DistanceMatrix";class _ extends v{constructor(t,e,r){super(),this.matrix=t,this.rows=e,this.columns=r}}class k extends _{constructor(t,e,r){g(t,e),p(t,r),super(t,e.length,r.length),this.rowIndices=e,this.columnIndices=r}set(t,e,r){return this.matrix.set(this.rowIndices[t],this.columnIndices[e],r),this}get(t,e){return this.matrix.get(this.rowIndices[t],this.columnIndices[e])}}class R extends v{constructor(t,e={}){const{rows:r=1}=e;if(t.length%r!=0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=r,this.columns=t.length/r,this.data=t}set(t,e,r){let n=this._calculateIndex(t,e);return this.data[n]=r,this}get(t,e){let r=this._calculateIndex(t,e);return this.data[r]}_calculateIndex(t,e){return t*this.columns+e}}class A extends v{constructor(t){super(),this.data=t,this.rows=t.length,this.columns=t[0].length}set(t,e,r){return this.data[t][e]=r,this}get(t,e){return this.data[t][e]}}class I{constructor(t){let e,r,n,o,s,i,a,u,h,l=(t=A.checkMatrix(t)).clone(),c=l.rows,f=l.columns,m=new Float64Array(c),g=1;for(e=0;e<c;e++)m[e]=e;for(u=new Float64Array(c),r=0;r<f;r++){for(e=0;e<c;e++)u[e]=l.get(e,r);for(e=0;e<c;e++){for(h=Math.min(e,r),s=0,n=0;n<h;n++)s+=l.get(e,n)*u[n];u[e]-=s,l.set(e,r,u[e])}for(o=r,e=r+1;e<c;e++)Math.abs(u[e])>Math.abs(u[o])&&(o=e);if(o!==r){for(n=0;n<f;n++)i=l.get(o,n),l.set(o,n,l.get(r,n)),l.set(r,n,i);a=m[o],m[o]=m[r],m[r]=a,g=-g}if(r<c&&0!==l.get(r,r))for(e=r+1;e<c;e++)l.set(e,r,l.get(e,r)/l.get(r,r))}this.LU=l,this.pivotVector=m,this.pivotSign=g}isSingular(){let t=this.LU,e=t.columns;for(let r=0;r<e;r++)if(0===t.get(r,r))return!0;return!1}solve(t){t=M.checkMatrix(t);let e=this.LU;if(e.rows!==t.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let r,n,o,s=t.columns,i=t.subMatrixRow(this.pivotVector,0,s-1),a=e.columns;for(o=0;o<a;o++)for(r=o+1;r<a;r++)for(n=0;n<s;n++)i.set(r,n,i.get(r,n)-i.get(o,n)*e.get(r,o));for(o=a-1;o>=0;o--){for(n=0;n<s;n++)i.set(o,n,i.get(o,n)/e.get(o,o));for(r=0;r<o;r++)for(n=0;n<s;n++)i.set(r,n,i.get(r,n)-i.get(o,n)*e.get(r,o))}return i}get determinant(){let t=this.LU;if(!t.isSquare())throw new Error("Matrix must be square");let e=this.pivotSign,r=t.columns;for(let n=0;n<r;n++)e*=t.get(n,n);return e}get lowerTriangularMatrix(){let t=this.LU,e=t.rows,r=t.columns,n=new M(e,r);for(let o=0;o<e;o++)for(let e=0;e<r;e++)o>e?n.set(o,e,t.get(o,e)):o===e?n.set(o,e,1):n.set(o,e,0);return n}get upperTriangularMatrix(){let t=this.LU,e=t.rows,r=t.columns,n=new M(e,r);for(let o=0;o<e;o++)for(let e=0;e<r;e++)o<=e?n.set(o,e,t.get(o,e)):n.set(o,e,0);return n}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function C(t,e){let r=0;return Math.abs(t)>Math.abs(e)?(r=e/t,Math.abs(t)*Math.sqrt(1+r*r)):0!==e?(r=t/e,Math.abs(e)*Math.sqrt(1+r*r)):0}class T{constructor(t){let e,r,n,o,s=(t=A.checkMatrix(t)).clone(),i=t.rows,a=t.columns,u=new Float64Array(a);for(n=0;n<a;n++){let t=0;for(e=n;e<i;e++)t=C(t,s.get(e,n));if(0!==t){for(s.get(n,n)<0&&(t=-t),e=n;e<i;e++)s.set(e,n,s.get(e,n)/t);for(s.set(n,n,s.get(n,n)+1),r=n+1;r<a;r++){for(o=0,e=n;e<i;e++)o+=s.get(e,n)*s.get(e,r);for(o=-o/s.get(n,n),e=n;e<i;e++)s.set(e,r,s.get(e,r)+o*s.get(e,n))}}u[n]=-t}this.QR=s,this.Rdiag=u}solve(t){t=M.checkMatrix(t);let e=this.QR,r=e.rows;if(t.rows!==r)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let n,o,s,i,a=t.columns,u=t.clone(),h=e.columns;for(s=0;s<h;s++)for(o=0;o<a;o++){for(i=0,n=s;n<r;n++)i+=e.get(n,s)*u.get(n,o);for(i=-i/e.get(s,s),n=s;n<r;n++)u.set(n,o,u.get(n,o)+i*e.get(n,s))}for(s=h-1;s>=0;s--){for(o=0;o<a;o++)u.set(s,o,u.get(s,o)/this.Rdiag[s]);for(n=0;n<s;n++)for(o=0;o<a;o++)u.set(n,o,u.get(n,o)-u.get(s,o)*e.get(n,s))}return u.subMatrix(0,h-1,0,a-1)}isFullRank(){let t=this.QR.columns;for(let e=0;e<t;e++)if(0===this.Rdiag[e])return!1;return!0}get upperTriangularMatrix(){let t,e,r=this.QR,n=r.columns,o=new M(n,n);for(t=0;t<n;t++)for(e=0;e<n;e++)t<e?o.set(t,e,r.get(t,e)):t===e?o.set(t,e,this.Rdiag[t]):o.set(t,e,0);return o}get orthogonalMatrix(){let t,e,r,n,o=this.QR,s=o.rows,i=o.columns,a=new M(s,i);for(r=i-1;r>=0;r--){for(t=0;t<s;t++)a.set(t,r,0);for(a.set(r,r,1),e=r;e<i;e++)if(0!==o.get(r,r)){for(n=0,t=r;t<s;t++)n+=o.get(t,r)*a.get(t,e);for(n=-n/o.get(r,r),t=r;t<s;t++)a.set(t,e,a.get(t,e)+n*o.get(t,r))}}return a}}class L{constructor(t,e={}){if((t=A.checkMatrix(t)).isEmpty())throw new Error("Matrix must be non-empty");let r=t.rows,n=t.columns;const{computeLeftSingularVectors:o=!0,computeRightSingularVectors:s=!0,autoTranspose:i=!1}=e;let a,u=Boolean(o),h=Boolean(s),l=!1;if(r<n)if(i){a=t.transpose(),r=a.rows,n=a.columns,l=!0;let e=u;u=h,h=e}else a=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else a=t.clone();let c=Math.min(r,n),f=Math.min(r+1,n),m=new Float64Array(f),g=new M(r,c),p=new M(n,n),d=new Float64Array(n),w=new Float64Array(r),y=new Float64Array(f);for(let t=0;t<f;t++)y[t]=t;let b=Math.min(r-1,n),v=Math.max(0,Math.min(n-2,r)),x=Math.max(b,v);for(let t=0;t<x;t++){if(t<b){m[t]=0;for(let e=t;e<r;e++)m[t]=C(m[t],a.get(e,t));if(0!==m[t]){a.get(t,t)<0&&(m[t]=-m[t]);for(let e=t;e<r;e++)a.set(e,t,a.get(e,t)/m[t]);a.set(t,t,a.get(t,t)+1)}m[t]=-m[t]}for(let e=t+1;e<n;e++){if(t<b&&0!==m[t]){let n=0;for(let o=t;o<r;o++)n+=a.get(o,t)*a.get(o,e);n=-n/a.get(t,t);for(let o=t;o<r;o++)a.set(o,e,a.get(o,e)+n*a.get(o,t))}d[e]=a.get(t,e)}if(u&&t<b)for(let e=t;e<r;e++)g.set(e,t,a.get(e,t));if(t<v){d[t]=0;for(let e=t+1;e<n;e++)d[t]=C(d[t],d[e]);if(0!==d[t]){d[t+1]<0&&(d[t]=0-d[t]);for(let e=t+1;e<n;e++)d[e]/=d[t];d[t+1]+=1}if(d[t]=-d[t],t+1<r&&0!==d[t]){for(let e=t+1;e<r;e++)w[e]=0;for(let e=t+1;e<r;e++)for(let r=t+1;r<n;r++)w[e]+=d[r]*a.get(e,r);for(let e=t+1;e<n;e++){let n=-d[e]/d[t+1];for(let o=t+1;o<r;o++)a.set(o,e,a.get(o,e)+n*w[o])}}if(h)for(let e=t+1;e<n;e++)p.set(e,t,d[e])}}let E=Math.min(n,r+1);if(b<n&&(m[b]=a.get(b,b)),r<E&&(m[E-1]=0),v+1<E&&(d[v]=a.get(v,E-1)),d[E-1]=0,u){for(let t=b;t<c;t++){for(let e=0;e<r;e++)g.set(e,t,0);g.set(t,t,1)}for(let t=b-1;t>=0;t--)if(0!==m[t]){for(let e=t+1;e<c;e++){let n=0;for(let o=t;o<r;o++)n+=g.get(o,t)*g.get(o,e);n=-n/g.get(t,t);for(let o=t;o<r;o++)g.set(o,e,g.get(o,e)+n*g.get(o,t))}for(let e=t;e<r;e++)g.set(e,t,-g.get(e,t));g.set(t,t,1+g.get(t,t));for(let e=0;e<t-1;e++)g.set(e,t,0)}else{for(let e=0;e<r;e++)g.set(e,t,0);g.set(t,t,1)}}if(h)for(let t=n-1;t>=0;t--){if(t<v&&0!==d[t])for(let e=t+1;e<n;e++){let r=0;for(let o=t+1;o<n;o++)r+=p.get(o,t)*p.get(o,e);r=-r/p.get(t+1,t);for(let o=t+1;o<n;o++)p.set(o,e,p.get(o,e)+r*p.get(o,t))}for(let e=0;e<n;e++)p.set(e,t,0);p.set(t,t,1)}let S=E-1,_=Number.EPSILON;for(;E>0;){let t,e;for(t=E-2;t>=-1&&-1!==t;t--){const e=Number.MIN_VALUE+_*Math.abs(m[t]+Math.abs(m[t+1]));if(Math.abs(d[t])<=e||Number.isNaN(d[t])){d[t]=0;break}}if(t===E-2)e=4;else{let r;for(r=E-1;r>=t&&r!==t;r--){let e=(r!==E?Math.abs(d[r]):0)+(r!==t+1?Math.abs(d[r-1]):0);if(Math.abs(m[r])<=_*e){m[r]=0;break}}r===t?e=3:r===E-1?e=1:(e=2,t=r)}switch(t++,e){case 1:{let e=d[E-2];d[E-2]=0;for(let r=E-2;r>=t;r--){let o=C(m[r],e),s=m[r]/o,i=e/o;if(m[r]=o,r!==t&&(e=-i*d[r-1],d[r-1]=s*d[r-1]),h)for(let t=0;t<n;t++)o=s*p.get(t,r)+i*p.get(t,E-1),p.set(t,E-1,-i*p.get(t,r)+s*p.get(t,E-1)),p.set(t,r,o)}break}case 2:{let e=d[t-1];d[t-1]=0;for(let n=t;n<E;n++){let o=C(m[n],e),s=m[n]/o,i=e/o;if(m[n]=o,e=-i*d[n],d[n]=s*d[n],u)for(let e=0;e<r;e++)o=s*g.get(e,n)+i*g.get(e,t-1),g.set(e,t-1,-i*g.get(e,n)+s*g.get(e,t-1)),g.set(e,n,o)}break}case 3:{const e=Math.max(Math.abs(m[E-1]),Math.abs(m[E-2]),Math.abs(d[E-2]),Math.abs(m[t]),Math.abs(d[t])),o=m[E-1]/e,s=m[E-2]/e,i=d[E-2]/e,a=m[t]/e,l=d[t]/e,c=((s+o)*(s-o)+i*i)/2,f=o*i*(o*i);let w=0;0===c&&0===f||(w=c<0?0-Math.sqrt(c*c+f):Math.sqrt(c*c+f),w=f/(c+w));let y=(a+o)*(a-o)+w,b=a*l;for(let e=t;e<E-1;e++){let o=C(y,b);0===o&&(o=Number.MIN_VALUE);let s=y/o,i=b/o;if(e!==t&&(d[e-1]=o),y=s*m[e]+i*d[e],d[e]=s*d[e]-i*m[e],b=i*m[e+1],m[e+1]=s*m[e+1],h)for(let t=0;t<n;t++)o=s*p.get(t,e)+i*p.get(t,e+1),p.set(t,e+1,-i*p.get(t,e)+s*p.get(t,e+1)),p.set(t,e,o);if(o=C(y,b),0===o&&(o=Number.MIN_VALUE),s=y/o,i=b/o,m[e]=o,y=s*d[e]+i*m[e+1],m[e+1]=-i*d[e]+s*m[e+1],b=i*d[e+1],d[e+1]=s*d[e+1],u&&e<r-1)for(let t=0;t<r;t++)o=s*g.get(t,e)+i*g.get(t,e+1),g.set(t,e+1,-i*g.get(t,e)+s*g.get(t,e+1)),g.set(t,e,o)}d[E-2]=y;break}case 4:if(m[t]<=0&&(m[t]=m[t]<0?-m[t]:0,h))for(let e=0;e<=S;e++)p.set(e,t,-p.get(e,t));for(;t<S&&!(m[t]>=m[t+1]);){let e=m[t];if(m[t]=m[t+1],m[t+1]=e,h&&t<n-1)for(let r=0;r<n;r++)e=p.get(r,t+1),p.set(r,t+1,p.get(r,t)),p.set(r,t,e);if(u&&t<r-1)for(let n=0;n<r;n++)e=g.get(n,t+1),g.set(n,t+1,g.get(n,t)),g.set(n,t,e);t++}E--}}if(l){let t=p;p=g,g=t}this.m=r,this.n=n,this.s=m,this.U=g,this.V=p}solve(t){let e=t,r=this.threshold,n=this.s.length,o=M.zeros(n,n);for(let t=0;t<n;t++)Math.abs(this.s[t])<=r?o.set(t,t,0):o.set(t,t,1/this.s[t]);let s=this.U,i=this.rightSingularVectors,a=i.mmul(o),u=i.rows,h=s.rows,l=M.zeros(u,h);for(let t=0;t<u;t++)for(let e=0;e<h;e++){let r=0;for(let o=0;o<n;o++)r+=a.get(t,o)*s.get(e,o);l.set(t,e,r)}return l.mmul(e)}solveForDiagonal(t){return this.solve(M.diag(t))}inverse(){let t=this.V,e=this.threshold,r=t.rows,n=t.columns,o=new M(r,this.s.length);for(let s=0;s<r;s++)for(let r=0;r<n;r++)Math.abs(this.s[r])>e&&o.set(s,r,t.get(s,r)/this.s[r]);let s=this.U,i=s.rows,a=s.columns,u=new M(r,i);for(let t=0;t<r;t++)for(let e=0;e<i;e++){let r=0;for(let n=0;n<a;n++)r+=o.get(t,n)*s.get(e,n);u.set(t,e,r)}return u}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,r=this.s;for(let n=0,o=r.length;n<o;n++)r[n]>t&&e++;return e}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return M.diag(this.s)}}function N(t,e,r=!1){return t=A.checkMatrix(t),e=A.checkMatrix(e),r?new L(t).solve(e):t.isSquare()?new I(t).solve(e):new T(t).solve(e)}function O(t,e){let r=[];for(let n=0;n<t;n++)n!==e&&r.push(n);return r}function j(t,e,r,n=1e-9,o=1e-9){if(t>o)return new Array(e.rows+1).fill(0);{let t=e.addRow(r,[0]);for(let e=0;e<t.rows;e++)Math.abs(t.get(e,0))<n&&t.set(e,0,0);return t.to1DArray()}}class z{constructor(t,e={}){const{assumeSymmetric:r=!1}=e;if(!(t=A.checkMatrix(t)).isSquare())throw new Error("Matrix is not a square matrix");if(t.isEmpty())throw new Error("Matrix must be non-empty");let n,o,s=t.columns,i=new M(s,s),a=new Float64Array(s),u=new Float64Array(s),h=t,l=!1;if(l=!!r||t.isSymmetric(),l){for(n=0;n<s;n++)for(o=0;o<s;o++)i.set(n,o,h.get(n,o));!function(t,e,r,n){let o,s,i,a,u,h,l,c;for(u=0;u<t;u++)r[u]=n.get(t-1,u);for(a=t-1;a>0;a--){for(c=0,i=0,h=0;h<a;h++)c+=Math.abs(r[h]);if(0===c)for(e[a]=r[a-1],u=0;u<a;u++)r[u]=n.get(a-1,u),n.set(a,u,0),n.set(u,a,0);else{for(h=0;h<a;h++)r[h]/=c,i+=r[h]*r[h];for(o=r[a-1],s=Math.sqrt(i),o>0&&(s=-s),e[a]=c*s,i-=o*s,r[a-1]=o-s,u=0;u<a;u++)e[u]=0;for(u=0;u<a;u++){for(o=r[u],n.set(u,a,o),s=e[u]+n.get(u,u)*o,h=u+1;h<=a-1;h++)s+=n.get(h,u)*r[h],e[h]+=n.get(h,u)*o;e[u]=s}for(o=0,u=0;u<a;u++)e[u]/=i,o+=e[u]*r[u];for(l=o/(i+i),u=0;u<a;u++)e[u]-=l*r[u];for(u=0;u<a;u++){for(o=r[u],s=e[u],h=u;h<=a-1;h++)n.set(h,u,n.get(h,u)-(o*e[h]+s*r[h]));r[u]=n.get(a-1,u),n.set(a,u,0)}}r[a]=i}for(a=0;a<t-1;a++){if(n.set(t-1,a,n.get(a,a)),n.set(a,a,1),i=r[a+1],0!==i){for(h=0;h<=a;h++)r[h]=n.get(h,a+1)/i;for(u=0;u<=a;u++){for(s=0,h=0;h<=a;h++)s+=n.get(h,a+1)*n.get(h,u);for(h=0;h<=a;h++)n.set(h,u,n.get(h,u)-s*r[h])}}for(h=0;h<=a;h++)n.set(h,a+1,0)}for(u=0;u<t;u++)r[u]=n.get(t-1,u),n.set(t-1,u,0);n.set(t-1,t-1,1),e[0]=0}(s,u,a,i),function(t,e,r,n){let o,s,i,a,u,h,l,c,f,m,g,p,d,w,y,b;for(i=1;i<t;i++)e[i-1]=e[i];e[t-1]=0;let v=0,x=0,M=Number.EPSILON;for(h=0;h<t;h++){for(x=Math.max(x,Math.abs(r[h])+Math.abs(e[h])),l=h;l<t&&!(Math.abs(e[l])<=M*x);)l++;if(l>h)do{for(o=r[h],c=(r[h+1]-o)/(2*e[h]),f=C(c,1),c<0&&(f=-f),r[h]=e[h]/(c+f),r[h+1]=e[h]*(c+f),m=r[h+1],s=o-r[h],i=h+2;i<t;i++)r[i]-=s;for(v+=s,c=r[l],g=1,p=g,d=g,w=e[h+1],y=0,b=0,i=l-1;i>=h;i--)for(d=p,p=g,b=y,o=g*e[i],s=g*c,f=C(c,e[i]),e[i+1]=y*f,y=e[i]/f,g=c/f,c=g*r[i]-y*o,r[i+1]=s+y*(g*o+y*r[i]),u=0;u<t;u++)s=n.get(u,i+1),n.set(u,i+1,y*n.get(u,i)+g*s),n.set(u,i,g*n.get(u,i)-y*s);c=-y*b*d*w*e[h]/m,e[h]=y*c,r[h]=g*c}while(Math.abs(e[h])>M*x);r[h]=r[h]+v,e[h]=0}for(i=0;i<t-1;i++){for(u=i,c=r[i],a=i+1;a<t;a++)r[a]<c&&(u=a,c=r[a]);if(u!==i)for(r[u]=r[i],r[i]=c,a=0;a<t;a++)c=n.get(a,i),n.set(a,i,n.get(a,u)),n.set(a,u,c)}}(s,u,a,i)}else{let t=new M(s,s),e=new Float64Array(s);for(o=0;o<s;o++)for(n=0;n<s;n++)t.set(n,o,h.get(n,o));!function(t,e,r,n){let o,s,i,a,u,h,l,c=t-1;for(h=1;h<=c-1;h++){for(l=0,a=h;a<=c;a++)l+=Math.abs(e.get(a,h-1));if(0!==l){for(i=0,a=c;a>=h;a--)r[a]=e.get(a,h-1)/l,i+=r[a]*r[a];for(s=Math.sqrt(i),r[h]>0&&(s=-s),i-=r[h]*s,r[h]=r[h]-s,u=h;u<t;u++){for(o=0,a=c;a>=h;a--)o+=r[a]*e.get(a,u);for(o/=i,a=h;a<=c;a++)e.set(a,u,e.get(a,u)-o*r[a])}for(a=0;a<=c;a++){for(o=0,u=c;u>=h;u--)o+=r[u]*e.get(a,u);for(o/=i,u=h;u<=c;u++)e.set(a,u,e.get(a,u)-o*r[u])}r[h]=l*r[h],e.set(h,h-1,l*s)}}for(a=0;a<t;a++)for(u=0;u<t;u++)n.set(a,u,a===u?1:0);for(h=c-1;h>=1;h--)if(0!==e.get(h,h-1)){for(a=h+1;a<=c;a++)r[a]=e.get(a,h-1);for(u=h;u<=c;u++){for(s=0,a=h;a<=c;a++)s+=r[a]*n.get(a,u);for(s=s/r[h]/e.get(h,h-1),a=h;a<=c;a++)n.set(a,u,n.get(a,u)+s*r[a])}}}(s,t,e,i),function(t,e,r,n,o){let s,i,a,u,h,l,c,f,m,g,p,d,w,y,b,v=t-1,x=t-1,M=Number.EPSILON,E=0,S=0,_=0,k=0,R=0,A=0,I=0,C=0;for(s=0;s<t;s++)for((s<0||s>x)&&(r[s]=o.get(s,s),e[s]=0),i=Math.max(s-1,0);i<t;i++)S+=Math.abs(o.get(s,i));for(;v>=0;){for(u=v;u>0&&(A=Math.abs(o.get(u-1,u-1))+Math.abs(o.get(u,u)),0===A&&(A=S),!(Math.abs(o.get(u,u-1))<M*A));)u--;if(u===v)o.set(v,v,o.get(v,v)+E),r[v]=o.get(v,v),e[v]=0,v--,C=0;else if(u===v-1){if(c=o.get(v,v-1)*o.get(v-1,v),_=(o.get(v-1,v-1)-o.get(v,v))/2,k=_*_+c,I=Math.sqrt(Math.abs(k)),o.set(v,v,o.get(v,v)+E),o.set(v-1,v-1,o.get(v-1,v-1)+E),f=o.get(v,v),k>=0){for(I=_>=0?_+I:_-I,r[v-1]=f+I,r[v]=r[v-1],0!==I&&(r[v]=f-c/I),e[v-1]=0,e[v]=0,f=o.get(v,v-1),A=Math.abs(f)+Math.abs(I),_=f/A,k=I/A,R=Math.sqrt(_*_+k*k),_/=R,k/=R,i=v-1;i<t;i++)I=o.get(v-1,i),o.set(v-1,i,k*I+_*o.get(v,i)),o.set(v,i,k*o.get(v,i)-_*I);for(s=0;s<=v;s++)I=o.get(s,v-1),o.set(s,v-1,k*I+_*o.get(s,v)),o.set(s,v,k*o.get(s,v)-_*I);for(s=0;s<=x;s++)I=n.get(s,v-1),n.set(s,v-1,k*I+_*n.get(s,v)),n.set(s,v,k*n.get(s,v)-_*I)}else r[v-1]=f+_,r[v]=f+_,e[v-1]=I,e[v]=-I;v-=2,C=0}else{if(f=o.get(v,v),m=0,c=0,u<v&&(m=o.get(v-1,v-1),c=o.get(v,v-1)*o.get(v-1,v)),10===C){for(E+=f,s=0;s<=v;s++)o.set(s,s,o.get(s,s)-f);A=Math.abs(o.get(v,v-1))+Math.abs(o.get(v-1,v-2)),f=m=.75*A,c=-.4375*A*A}if(30===C&&(A=(m-f)/2,A=A*A+c,A>0)){for(A=Math.sqrt(A),m<f&&(A=-A),A=f-c/((m-f)/2+A),s=0;s<=v;s++)o.set(s,s,o.get(s,s)-A);E+=A,f=m=c=.964}for(C+=1,h=v-2;h>=u&&(I=o.get(h,h),R=f-I,A=m-I,_=(R*A-c)/o.get(h+1,h)+o.get(h,h+1),k=o.get(h+1,h+1)-I-R-A,R=o.get(h+2,h+1),A=Math.abs(_)+Math.abs(k)+Math.abs(R),_/=A,k/=A,R/=A,h!==u)&&!(Math.abs(o.get(h,h-1))*(Math.abs(k)+Math.abs(R))<M*(Math.abs(_)*(Math.abs(o.get(h-1,h-1))+Math.abs(I)+Math.abs(o.get(h+1,h+1)))));)h--;for(s=h+2;s<=v;s++)o.set(s,s-2,0),s>h+2&&o.set(s,s-3,0);for(a=h;a<=v-1&&(y=a!==v-1,a!==h&&(_=o.get(a,a-1),k=o.get(a+1,a-1),R=y?o.get(a+2,a-1):0,f=Math.abs(_)+Math.abs(k)+Math.abs(R),0!==f&&(_/=f,k/=f,R/=f)),0!==f);a++)if(A=Math.sqrt(_*_+k*k+R*R),_<0&&(A=-A),0!==A){for(a!==h?o.set(a,a-1,-A*f):u!==h&&o.set(a,a-1,-o.get(a,a-1)),_+=A,f=_/A,m=k/A,I=R/A,k/=_,R/=_,i=a;i<t;i++)_=o.get(a,i)+k*o.get(a+1,i),y&&(_+=R*o.get(a+2,i),o.set(a+2,i,o.get(a+2,i)-_*I)),o.set(a,i,o.get(a,i)-_*f),o.set(a+1,i,o.get(a+1,i)-_*m);for(s=0;s<=Math.min(v,a+3);s++)_=f*o.get(s,a)+m*o.get(s,a+1),y&&(_+=I*o.get(s,a+2),o.set(s,a+2,o.get(s,a+2)-_*R)),o.set(s,a,o.get(s,a)-_),o.set(s,a+1,o.get(s,a+1)-_*k);for(s=0;s<=x;s++)_=f*n.get(s,a)+m*n.get(s,a+1),y&&(_+=I*n.get(s,a+2),n.set(s,a+2,n.get(s,a+2)-_*R)),n.set(s,a,n.get(s,a)-_),n.set(s,a+1,n.get(s,a+1)-_*k)}}}if(0!==S){for(v=t-1;v>=0;v--)if(_=r[v],k=e[v],0===k)for(u=v,o.set(v,v,1),s=v-1;s>=0;s--){for(c=o.get(s,s)-_,R=0,i=u;i<=v;i++)R+=o.get(s,i)*o.get(i,v);if(e[s]<0)I=c,A=R;else if(u=s,0===e[s]?o.set(s,v,0!==c?-R/c:-R/(M*S)):(f=o.get(s,s+1),m=o.get(s+1,s),k=(r[s]-_)*(r[s]-_)+e[s]*e[s],l=(f*A-I*R)/k,o.set(s,v,l),o.set(s+1,v,Math.abs(f)>Math.abs(I)?(-R-c*l)/f:(-A-m*l)/I)),l=Math.abs(o.get(s,v)),M*l*l>1)for(i=s;i<=v;i++)o.set(i,v,o.get(i,v)/l)}else if(k<0)for(u=v-1,Math.abs(o.get(v,v-1))>Math.abs(o.get(v-1,v))?(o.set(v-1,v-1,k/o.get(v,v-1)),o.set(v-1,v,-(o.get(v,v)-_)/o.get(v,v-1))):(b=F(0,-o.get(v-1,v),o.get(v-1,v-1)-_,k),o.set(v-1,v-1,b[0]),o.set(v-1,v,b[1])),o.set(v,v-1,0),o.set(v,v,1),s=v-2;s>=0;s--){for(g=0,p=0,i=u;i<=v;i++)g+=o.get(s,i)*o.get(i,v-1),p+=o.get(s,i)*o.get(i,v);if(c=o.get(s,s)-_,e[s]<0)I=c,R=g,A=p;else if(u=s,0===e[s]?(b=F(-g,-p,c,k),o.set(s,v-1,b[0]),o.set(s,v,b[1])):(f=o.get(s,s+1),m=o.get(s+1,s),d=(r[s]-_)*(r[s]-_)+e[s]*e[s]-k*k,w=2*(r[s]-_)*k,0===d&&0===w&&(d=M*S*(Math.abs(c)+Math.abs(k)+Math.abs(f)+Math.abs(m)+Math.abs(I))),b=F(f*R-I*g+k*p,f*A-I*p-k*g,d,w),o.set(s,v-1,b[0]),o.set(s,v,b[1]),Math.abs(f)>Math.abs(I)+Math.abs(k)?(o.set(s+1,v-1,(-g-c*o.get(s,v-1)+k*o.get(s,v))/f),o.set(s+1,v,(-p-c*o.get(s,v)-k*o.get(s,v-1))/f)):(b=F(-R-m*o.get(s,v-1),-A-m*o.get(s,v),I,k),o.set(s+1,v-1,b[0]),o.set(s+1,v,b[1]))),l=Math.max(Math.abs(o.get(s,v-1)),Math.abs(o.get(s,v))),M*l*l>1)for(i=s;i<=v;i++)o.set(i,v-1,o.get(i,v-1)/l),o.set(i,v,o.get(i,v)/l)}for(s=0;s<t;s++)if(s<0||s>x)for(i=s;i<t;i++)n.set(s,i,o.get(s,i));for(i=t-1;i>=0;i--)for(s=0;s<=x;s++){for(I=0,a=0;a<=Math.min(i,x);a++)I+=n.get(s,a)*o.get(a,i);n.set(s,i,I)}}}(s,u,a,i,t)}this.n=s,this.e=u,this.d=a,this.V=i}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let t,e,r=this.n,n=this.e,o=this.d,s=new M(r,r);for(t=0;t<r;t++){for(e=0;e<r;e++)s.set(t,e,0);s.set(t,t,o[t]),n[t]>0?s.set(t,t+1,n[t]):n[t]<0&&s.set(t,t-1,n[t])}return s}}function F(t,e,r,n){let o,s;return Math.abs(r)>Math.abs(n)?(o=n/r,s=r+o*n,[(t+o*e)/s,(e-o*t)/s]):(o=r/n,s=n+o*r,[(o*t+e)/s,(o*e-t)/s])}class P{constructor(t){if(!(t=A.checkMatrix(t)).isSymmetric())throw new Error("Matrix is not symmetric");let e,r,n,o=t,s=o.rows,i=new M(s,s),a=!0;for(r=0;r<s;r++){let t=0;for(n=0;n<r;n++){let s=0;for(e=0;e<n;e++)s+=i.get(n,e)*i.get(r,e);s=(o.get(r,n)-s)/i.get(n,n),i.set(r,n,s),t+=s*s}for(t=o.get(r,r)-t,a&=t>0,i.set(r,r,Math.sqrt(Math.max(t,0))),n=r+1;n<s;n++)i.set(r,n,0)}this.L=i,this.positiveDefinite=Boolean(a)}isPositiveDefinite(){return this.positiveDefinite}solve(t){t=A.checkMatrix(t);let e=this.L,r=e.rows;if(t.rows!==r)throw new Error("Matrix dimensions do not match");if(!1===this.isPositiveDefinite())throw new Error("Matrix is not positive definite");let n,o,s,i=t.columns,a=t.clone();for(s=0;s<r;s++)for(o=0;o<i;o++){for(n=0;n<s;n++)a.set(s,o,a.get(s,o)-a.get(n,o)*e.get(s,n));a.set(s,o,a.get(s,o)/e.get(s,s))}for(s=r-1;s>=0;s--)for(o=0;o<i;o++){for(n=s+1;n<r;n++)a.set(s,o,a.get(s,o)-a.get(n,o)*e.get(n,s));a.set(s,o,a.get(s,o)/e.get(s,s))}return a}get lowerTriangularMatrix(){return this.L}}class D{constructor(t,e={}){t=A.checkMatrix(t);let{Y:r}=e;const{scaleScores:o=!1,maxIterations:s=1e3,terminationCriteria:i=1e-10}=e;let a;if(r){if(r=n.isAnyArray(r)&&"number"==typeof r[0]?M.columnVector(r):A.checkMatrix(r),r.rows!==t.rows)throw new Error("Y should have the same number of rows as X");a=r.getColumnVector(0)}else a=t.getColumnVector(0);let u,h,l,c,f=1;for(let e=0;e<s&&f>i;e++)l=t.transpose().mmul(a).div(a.transpose().mmul(a).get(0,0)),l=l.div(l.norm()),u=t.mmul(l).div(l.transpose().mmul(l).get(0,0)),e>0&&(f=u.clone().sub(c).pow(2).sum()),c=u.clone(),r?(h=r.transpose().mmul(u).div(u.transpose().mmul(u).get(0,0)),h=h.div(h.norm()),a=r.mmul(h).div(h.transpose().mmul(h).get(0,0))):a=u;if(r){let e=t.transpose().mmul(u).div(u.transpose().mmul(u).get(0,0));e=e.div(e.norm());let n=t.clone().sub(u.clone().mmul(e.transpose())),o=a.transpose().mmul(u).div(u.transpose().mmul(u).get(0,0)),s=r.clone().sub(u.clone().mulS(o.get(0,0)).mmul(h.transpose()));this.t=u,this.p=e.transpose(),this.w=l.transpose(),this.q=h,this.u=a,this.s=u.transpose().mmul(u),this.xResidual=n,this.yResidual=s,this.betas=o}else this.w=l.transpose(),this.s=u.transpose().mmul(u).sqrt(),this.t=o?u.clone().div(this.s.get(0,0)):u,this.xResidual=t.sub(u.mmul(l.transpose()))}}e.y3=v,e.jy=P,e.oN=P,e.Hc=S,e.cg=z,e.hj=z,e.LU=I,e.Tb=I,e.uq=M,e.Zm=class extends _{constructor(t,e){p(t,e),super(t,t.rows,e.length),this.columnIndices=e}set(t,e,r){return this.matrix.set(t,this.columnIndices[e],r),this}get(t,e){return this.matrix.get(t,this.columnIndices[e])}},e.Dq=class extends _{constructor(t,e){c(t,e),super(t,t.rows,1),this.column=e}set(t,e,r){return this.matrix.set(t,this.column,r),this}get(t){return this.matrix.get(t,this.column)}},e.__=class extends _{constructor(t){super(t,t.rows,t.columns)}set(t,e,r){return this.matrix.set(t,this.columns-e-1,r),this}get(t,e){return this.matrix.get(t,this.columns-e-1)}},e.q0=class extends _{constructor(t){super(t,t.rows,t.columns)}set(t,e,r){return this.matrix.set(this.rows-t-1,e,r),this}get(t,e){return this.matrix.get(this.rows-t-1,e)}},e.lh=class extends _{constructor(t,e){g(t,e),super(t,e.length,t.columns),this.rowIndices=e}set(t,e,r){return this.matrix.set(this.rowIndices[t],e,r),this}get(t,e){return this.matrix.get(this.rowIndices[t],e)}},e.pI=class extends _{constructor(t,e){l(t,e),super(t,1,t.columns),this.row=e}set(t,e,r){return this.matrix.set(this.row,e,r),this}get(t,e){return this.matrix.get(this.row,e)}},e.zC=k,e.zg=class extends _{constructor(t,e,r,n,o){d(t,e,r,n,o),super(t,r-e+1,o-n+1),this.startRow=e,this.startColumn=n}set(t,e,r){return this.matrix.set(this.startRow+t,this.startColumn+e,r),this}get(t,e){return this.matrix.get(this.startRow+t,this.startColumn+e)}},e.g6=class extends _{constructor(t){super(t,t.columns,t.rows)}set(t,e,r){return this.matrix.set(e,t,r),this}get(t,e){return this.matrix.get(e,t)}},e.OL=D,e.ks=D,e.QR=T,e.jp=T,e.mk=L,e.W2=L,e.l=E,e.KY=R,e.dv=A,e.BR=function(t,e=t,r={}){t=new M(t);let o=!1;if("object"!=typeof e||M.isMatrix(e)||n.isAnyArray(e)?e=new M(e):(r=e,e=t,o=!0),t.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:s=!0,scale:i=!0}=r;s&&(t.center("column"),o||e.center("column")),i&&(t.scale("column"),o||e.scale("column"));const a=t.standardDeviation("column",{unbiased:!0}),u=o?a:e.standardDeviation("column",{unbiased:!0}),h=t.transpose().mmul(e);for(let e=0;e<h.rows;e++)for(let r=0;r<h.columns;r++)h.set(e,r,h.get(e,r)*(1/(a[e]*u[r]))*(1/(t.rows-1)));return h},e.Wu=function(t,e=t,r={}){t=new M(t);let o=!1;if("object"!=typeof e||M.isMatrix(e)||n.isAnyArray(e)?e=new M(e):(r=e,e=t,o=!0),t.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:s=!0}=r;s&&(t=t.center("column"),o||(e=e.center("column")));const i=t.transpose().mmul(e);for(let e=0;e<i.rows;e++)for(let r=0;r<i.columns;r++)i.set(e,r,i.get(e,r)*(1/(t.rows-1)));return i},e.a4=function t(e){if((e=M.checkMatrix(e)).isSquare()){if(0===e.columns)return 1;let r,n,o,s;if(2===e.columns)return r=e.get(0,0),n=e.get(0,1),o=e.get(1,0),s=e.get(1,1),r*s-n*o;if(3===e.columns){let s,i,a;return s=new k(e,[1,2],[1,2]),i=new k(e,[1,2],[0,2]),a=new k(e,[1,2],[0,1]),r=e.get(0,0),n=e.get(0,1),o=e.get(0,2),r*t(s)-n*t(i)+o*t(a)}return new I(e).determinant}throw Error("determinant can only be calculated for a square matrix")},e.DI=function(t,e=!1){return t=A.checkMatrix(t),e?new L(t).inverse():N(t,M.eye(t.rows))},e.Jo=function(t,e={}){const{thresholdValue:r=1e-9,thresholdError:n=1e-9}=e;let o=(t=M.checkMatrix(t)).rows,s=new M(o,o);for(let e=0;e<o;e++){let i=M.columnVector(t.getRow(e)),a=t.subMatrixRow(O(o,e)).transpose(),u=new L(a).solve(i),h=M.sub(i,a.mmul(u)).abs().max();s.setRow(e,j(h,u,e,r,n))}return s},e.Zi=function(t,e=Number.EPSILON){if((t=M.checkMatrix(t)).isEmpty())return t.transpose();let r=new L(t,{autoTranspose:!0}),n=r.leftSingularVectors,o=r.rightSingularVectors,s=r.diagonal;for(let t=0;t<s.length;t++)Math.abs(s[t])>e?s[t]=1/s[t]:s[t]=0;return o.mmul(M.diag(s).mmul(n.transpose()))},e.kH=N,e.LV=function(t,e){if(n.isAnyArray(t))return t[0]&&n.isAnyArray(t[0])?new A(t):new R(t,e);throw new Error("the argument is not an array")}},98:function(t,e){var r,n;r=function t(){"use strict";var e="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{},r=!e.document&&!!e.postMessage,n=e.IS_PAPA_WORKER||!1,o={},s=0,i={parse:function(r,n){var a=(n=n||{}).dynamicTyping||!1;if(x(a)&&(n.dynamicTypingFunction=a,a={}),n.dynamicTyping=a,n.transform=!!x(n.transform)&&n.transform,n.worker&&i.WORKERS_SUPPORTED){var u=function(){if(!i.WORKERS_SUPPORTED)return!1;var r,n,a=(r=e.URL||e.webkitURL||null,n=t.toString(),i.BLOB_URL||(i.BLOB_URL=r.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",n,")();"],{type:"text/javascript"})))),u=new e.Worker(a);return u.onmessage=d,u.id=s++,o[u.id]=u}();return u.userStep=n.step,u.userChunk=n.chunk,u.userComplete=n.complete,u.userError=n.error,n.step=x(n.step),n.chunk=x(n.chunk),n.complete=x(n.complete),n.error=x(n.error),delete n.worker,void u.postMessage({input:r,config:n,workerId:u.id})}var m=null;return i.NODE_STREAM_INPUT,"string"==typeof r?(r=function(t){return 65279===t.charCodeAt(0)?t.slice(1):t}(r),m=n.download?new h(n):new c(n)):!0===r.readable&&x(r.read)&&x(r.on)?m=new f(n):(e.File&&r instanceof File||r instanceof Object)&&(m=new l(n)),m.stream(r)},unparse:function(t,e){var r=!1,n=!0,o=",",s="\r\n",a='"',u=a+a,h=!1,l=null,c=!1;!function(){if("object"==typeof e){if("string"!=typeof e.delimiter||i.BAD_DELIMITERS.filter((function(t){return-1!==e.delimiter.indexOf(t)})).length||(o=e.delimiter),("boolean"==typeof e.quotes||"function"==typeof e.quotes||Array.isArray(e.quotes))&&(r=e.quotes),"boolean"!=typeof e.skipEmptyLines&&"string"!=typeof e.skipEmptyLines||(h=e.skipEmptyLines),"string"==typeof e.newline&&(s=e.newline),"string"==typeof e.quoteChar&&(a=e.quoteChar),"boolean"==typeof e.header&&(n=e.header),Array.isArray(e.columns)){if(0===e.columns.length)throw new Error("Option columns is empty");l=e.columns}void 0!==e.escapeChar&&(u=e.escapeChar+a),("boolean"==typeof e.escapeFormulae||e.escapeFormulae instanceof RegExp)&&(c=e.escapeFormulae instanceof RegExp?e.escapeFormulae:/^[=+\-@\t\r].*$/)}}();var f=new RegExp(g(a),"g");if("string"==typeof t&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return m(null,t,h);if("object"==typeof t[0])return m(l||Object.keys(t[0]),t,h)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||l),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:"object"==typeof t.data[0]?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||"object"==typeof t.data[0]||(t.data=[t.data])),m(t.fields||[],t.data||[],h);throw new Error("Unable to serialize unrecognized input");function m(t,e,r){var i="";"string"==typeof t&&(t=JSON.parse(t)),"string"==typeof e&&(e=JSON.parse(e));var a=Array.isArray(t)&&0<t.length,u=!Array.isArray(e[0]);if(a&&n){for(var h=0;h<t.length;h++)0<h&&(i+=o),i+=p(t[h],h);0<e.length&&(i+=s)}for(var l=0;l<e.length;l++){var c=a?t.length:e[l].length,f=!1,m=a?0===Object.keys(e[l]).length:0===e[l].length;if(r&&!a&&(f="greedy"===r?""===e[l].join("").trim():1===e[l].length&&0===e[l][0].length),"greedy"===r&&a){for(var g=[],d=0;d<c;d++){var w=u?t[d]:d;g.push(e[l][w])}f=""===g.join("").trim()}if(!f){for(var y=0;y<c;y++){0<y&&!m&&(i+=o);var b=a&&u?t[y]:y;i+=p(e[l][b],y)}l<e.length-1&&(!r||0<c&&!m)&&(i+=s)}}return i}function p(t,e){if(null==t)return"";if(t.constructor===Date)return JSON.stringify(t).slice(1,25);var n=!1;c&&"string"==typeof t&&c.test(t)&&(t="'"+t,n=!0);var s=t.toString().replace(f,u);return(n=n||!0===r||"function"==typeof r&&r(t,e)||Array.isArray(r)&&r[e]||function(t,e){for(var r=0;r<e.length;r++)if(-1<t.indexOf(e[r]))return!0;return!1}(s,i.BAD_DELIMITERS)||-1<s.indexOf(o)||" "===s.charAt(0)||" "===s.charAt(s.length-1))?a+s+a:s}}};if(i.RECORD_SEP=String.fromCharCode(30),i.UNIT_SEP=String.fromCharCode(31),i.BYTE_ORDER_MARK="\ufeff",i.BAD_DELIMITERS=["\r","\n",'"',i.BYTE_ORDER_MARK],i.WORKERS_SUPPORTED=!r&&!!e.Worker,i.NODE_STREAM_INPUT=1,i.LocalChunkSize=10485760,i.RemoteChunkSize=5242880,i.DefaultDelimiter=",",i.Parser=p,i.ParserHandle=m,i.NetworkStreamer=h,i.FileStreamer=l,i.StringStreamer=c,i.ReadableStreamStreamer=f,e.jQuery){var a=e.jQuery;a.fn.parse=function(t){var r=t.config||{},n=[];return this.each((function(t){if("INPUT"!==a(this).prop("tagName").toUpperCase()||"file"!==a(this).attr("type").toLowerCase()||!e.FileReader||!this.files||0===this.files.length)return!0;for(var o=0;o<this.files.length;o++)n.push({file:this.files[o],inputElem:this,instanceConfig:a.extend({},r)})})),o(),this;function o(){if(0!==n.length){var e,r,o,u=n[0];if(x(t.before)){var h=t.before(u.file,u.inputElem);if("object"==typeof h){if("abort"===h.action)return e=u.file,r=u.inputElem,o=h.reason,void(x(t.error)&&t.error({name:"AbortError"},e,r,o));if("skip"===h.action)return void s();"object"==typeof h.config&&(u.instanceConfig=a.extend(u.instanceConfig,h.config))}else if("skip"===h)return void s()}var l=u.instanceConfig.complete;u.instanceConfig.complete=function(t){x(l)&&l(t,u.file,u.inputElem),s()},i.parse(u.file,u.instanceConfig)}else x(t.complete)&&t.complete()}function s(){n.splice(0,1),o()}}}function u(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(t){var e=b(t);e.chunkSize=parseInt(e.chunkSize),t.step||t.chunk||(e.chunkSize=null),this._handle=new m(e),(this._handle.streamer=this)._config=e}.call(this,t),this.parseChunk=function(t,r){if(this.isFirstChunk&&x(this._config.beforeFirstChunk)){var o=this._config.beforeFirstChunk(t);void 0!==o&&(t=o)}this.isFirstChunk=!1,this._halted=!1;var s=this._partialLine+t;this._partialLine="";var a=this._handle.parse(s,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var u=a.meta.cursor;this._finished||(this._partialLine=s.substring(u-this._baseIndex),this._baseIndex=u),a&&a.data&&(this._rowCount+=a.data.length);var h=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(n)e.postMessage({results:a,workerId:i.WORKER_ID,finished:h});else if(x(this._config.chunk)&&!r){if(this._config.chunk(a,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);a=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(a.data),this._completeResults.errors=this._completeResults.errors.concat(a.errors),this._completeResults.meta=a.meta),this._completed||!h||!x(this._config.complete)||a&&a.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),h||a&&a.meta.paused||this._nextChunk(),a}this._halted=!0},this._sendError=function(t){x(this._config.error)?this._config.error(t):n&&this._config.error&&e.postMessage({workerId:i.WORKER_ID,error:t,finished:!1})}}function h(t){var e;(t=t||{}).chunkSize||(t.chunkSize=i.RemoteChunkSize),u.call(this,t),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(t){this._input=t,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),r||(e.onload=v(this._chunkLoaded,this),e.onerror=v(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var t=this._config.downloadRequestHeaders;for(var n in t)e.setRequestHeader(n,t[n])}if(this._config.chunkSize){var o=this._start+this._config.chunkSize-1;e.setRequestHeader("Range","bytes="+this._start+"-"+o)}try{e.send(this._config.downloadRequestBody)}catch(t){this._chunkError(t.message)}r&&0===e.status&&this._chunkError()}},this._chunkLoaded=function(){4===e.readyState&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:e.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(t){var e=t.getResponseHeader("Content-Range");return null===e?-1:parseInt(e.substring(e.lastIndexOf("/")+1))}(e),this.parseChunk(e.responseText)))},this._chunkError=function(t){var r=e.statusText||t;this._sendError(new Error(r))}}function l(t){var e,r;(t=t||{}).chunkSize||(t.chunkSize=i.LocalChunkSize),u.call(this,t);var n="undefined"!=typeof FileReader;this.stream=function(t){this._input=t,r=t.slice||t.webkitSlice||t.mozSlice,n?((e=new FileReader).onload=v(this._chunkLoaded,this),e.onerror=v(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var t=this._input;if(this._config.chunkSize){var o=Math.min(this._start+this._config.chunkSize,this._input.size);t=r.call(t,this._start,o)}var s=e.readAsText(t,this._config.encoding);n||this._chunkLoaded({target:{result:s}})},this._chunkLoaded=function(t){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(t.target.result)},this._chunkError=function(){this._sendError(e.error)}}function c(t){var e;u.call(this,t=t||{}),this.stream=function(t){return e=t,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var t,r=this._config.chunkSize;return r?(t=e.substring(0,r),e=e.substring(r)):(t=e,e=""),this._finished=!e,this.parseChunk(t)}}}function f(t){u.call(this,t=t||{});var e=[],r=!0,n=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(t){this._input=t,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){n&&1===e.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):r=!0},this._streamData=v((function(t){try{e.push("string"==typeof t?t:t.toString(this._config.encoding)),r&&(r=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(t){this._streamError(t)}}),this),this._streamError=v((function(t){this._streamCleanUp(),this._sendError(t)}),this),this._streamEnd=v((function(){this._streamCleanUp(),n=!0,this._streamData("")}),this),this._streamCleanUp=v((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function m(t){var e,r,n,o=Math.pow(2,53),s=-o,a=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,u=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,h=this,l=0,c=0,f=!1,m=!1,d=[],w={data:[],errors:[],meta:{}};if(x(t.step)){var y=t.step;t.step=function(e){if(w=e,E())M();else{if(M(),0===w.data.length)return;l+=e.data.length,t.preview&&l>t.preview?r.abort():(w.data=w.data[0],y(w,h))}}}function v(e){return"greedy"===t.skipEmptyLines?""===e.join("").trim():1===e.length&&0===e[0].length}function M(){return w&&n&&(_("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+i.DefaultDelimiter+"'"),n=!1),t.skipEmptyLines&&(w.data=w.data.filter((function(t){return!v(t)}))),E()&&function(){if(w)if(Array.isArray(w.data[0])){for(var e=0;E()&&e<w.data.length;e++)w.data[e].forEach(r);w.data.splice(0,1)}else w.data.forEach(r);function r(e,r){x(t.transformHeader)&&(e=t.transformHeader(e,r)),d.push(e)}}(),function(){if(!w||!t.header&&!t.dynamicTyping&&!t.transform)return w;function e(e,r){var n,o=t.header?{}:[];for(n=0;n<e.length;n++){var s=n,i=e[n];t.header&&(s=n>=d.length?"__parsed_extra":d[n]),t.transform&&(i=t.transform(i,s)),i=S(s,i),"__parsed_extra"===s?(o[s]=o[s]||[],o[s].push(i)):o[s]=i}return t.header&&(n>d.length?_("FieldMismatch","TooManyFields","Too many fields: expected "+d.length+" fields but parsed "+n,c+r):n<d.length&&_("FieldMismatch","TooFewFields","Too few fields: expected "+d.length+" fields but parsed "+n,c+r)),o}var r=1;return!w.data.length||Array.isArray(w.data[0])?(w.data=w.data.map(e),r=w.data.length):w.data=e(w.data,0),t.header&&w.meta&&(w.meta.fields=d),c+=r,w}()}function E(){return t.header&&0===d.length}function S(e,r){return n=e,t.dynamicTypingFunction&&void 0===t.dynamicTyping[n]&&(t.dynamicTyping[n]=t.dynamicTypingFunction(n)),!0===(t.dynamicTyping[n]||t.dynamicTyping)?"true"===r||"TRUE"===r||"false"!==r&&"FALSE"!==r&&(function(t){if(a.test(t)){var e=parseFloat(t);if(s<e&&e<o)return!0}return!1}(r)?parseFloat(r):u.test(r)?new Date(r):""===r?null:r):r;var n}function _(t,e,r,n){var o={type:t,code:e,message:r};void 0!==n&&(o.row=n),w.errors.push(o)}this.parse=function(o,s,a){var u=t.quoteChar||'"';if(t.newline||(t.newline=function(t,e){t=t.substring(0,1048576);var r=new RegExp(g(e)+"([^]*?)"+g(e),"gm"),n=(t=t.replace(r,"")).split("\r"),o=t.split("\n"),s=1<o.length&&o[0].length<n[0].length;if(1===n.length||s)return"\n";for(var i=0,a=0;a<n.length;a++)"\n"===n[a][0]&&i++;return i>=n.length/2?"\r\n":"\r"}(o,u)),n=!1,t.delimiter)x(t.delimiter)&&(t.delimiter=t.delimiter(o),w.meta.delimiter=t.delimiter);else{var h=function(e,r,n,o,s){var a,u,h,l;s=s||[",","\t","|",";",i.RECORD_SEP,i.UNIT_SEP];for(var c=0;c<s.length;c++){var f=s[c],m=0,g=0,d=0;h=void 0;for(var w=new p({comments:o,delimiter:f,newline:r,preview:10}).parse(e),y=0;y<w.data.length;y++)if(n&&v(w.data[y]))d++;else{var b=w.data[y].length;g+=b,void 0!==h?0<b&&(m+=Math.abs(b-h),h=b):h=b}0<w.data.length&&(g/=w.data.length-d),(void 0===u||m<=u)&&(void 0===l||l<g)&&1.99<g&&(u=m,a=f,l=g)}return{successful:!!(t.delimiter=a),bestDelimiter:a}}(o,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess);h.successful?t.delimiter=h.bestDelimiter:(n=!0,t.delimiter=i.DefaultDelimiter),w.meta.delimiter=t.delimiter}var l=b(t);return t.preview&&t.header&&l.preview++,e=o,r=new p(l),w=r.parse(e,s,a),M(),f?{meta:{paused:!0}}:w||{meta:{paused:!1}}},this.paused=function(){return f},this.pause=function(){f=!0,r.abort(),e=x(t.chunk)?"":e.substring(r.getCharIndex())},this.resume=function(){h.streamer._halted?(f=!1,h.streamer.parseChunk(e,!0)):setTimeout(h.resume,3)},this.aborted=function(){return m},this.abort=function(){m=!0,r.abort(),w.meta.aborted=!0,x(t.complete)&&t.complete(w),e=""}}function g(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function p(t){var e,r=(t=t||{}).delimiter,n=t.newline,o=t.comments,s=t.step,a=t.preview,u=t.fastMode,h=e=void 0===t.quoteChar||null===t.quoteChar?'"':t.quoteChar;if(void 0!==t.escapeChar&&(h=t.escapeChar),("string"!=typeof r||-1<i.BAD_DELIMITERS.indexOf(r))&&(r=","),o===r)throw new Error("Comment character same as delimiter");!0===o?o="#":("string"!=typeof o||-1<i.BAD_DELIMITERS.indexOf(o))&&(o=!1),"\n"!==n&&"\r"!==n&&"\r\n"!==n&&(n="\n");var l=0,c=!1;this.parse=function(i,f,m){if("string"!=typeof i)throw new Error("Input must be a string");var p=i.length,d=r.length,w=n.length,y=o.length,b=x(s),v=[],M=[],E=[],S=l=0;if(!i)return W();if(t.header&&!f){var _=i.split(n)[0].split(r),k=[],R={},A=!1;for(var I in _){var C=_[I];x(t.transformHeader)&&(C=t.transformHeader(C,I));var T=C,L=R[C]||0;for(0<L&&(A=!0,T=C+"_"+L),R[C]=L+1;k.includes(T);)T=T+"_"+L;k.push(T)}if(A){var N=i.split(n);N[0]=k.join(r),i=N.join(n)}}if(u||!1!==u&&-1===i.indexOf(e)){for(var O=i.split(n),j=0;j<O.length;j++){if(E=O[j],l+=E.length,j!==O.length-1)l+=n.length;else if(m)return W();if(!o||E.substring(0,y)!==o){if(b){if(v=[],U(E.split(r)),H(),c)return W()}else U(E.split(r));if(a&&a<=j)return v=v.slice(0,a),W(!0)}}return W()}for(var z=i.indexOf(r,l),F=i.indexOf(n,l),P=new RegExp(g(h)+g(e),"g"),D=i.indexOf(e,l);;)if(i[l]!==e)if(o&&0===E.length&&i.substring(l,l+y)===o){if(-1===F)return W();l=F+w,F=i.indexOf(n,l),z=i.indexOf(r,l)}else if(-1!==z&&(z<F||-1===F))E.push(i.substring(l,z)),l=z+d,z=i.indexOf(r,l);else{if(-1===F)break;if(E.push(i.substring(l,F)),G(F+w),b&&(H(),c))return W();if(a&&v.length>=a)return W(!0)}else for(D=l,l++;;){if(-1===(D=i.indexOf(e,D+1)))return m||M.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:v.length,index:l}),B();if(D===p-1)return B(i.substring(l,D).replace(P,e));if(e!==h||i[D+1]!==h){if(e===h||0===D||i[D-1]!==h){-1!==z&&z<D+1&&(z=i.indexOf(r,D+1)),-1!==F&&F<D+1&&(F=i.indexOf(n,D+1));var q=$(-1===F?z:Math.min(z,F));if(i.substr(D+1+q,d)===r){E.push(i.substring(l,D).replace(P,e)),i[l=D+1+q+d]!==e&&(D=i.indexOf(e,l)),z=i.indexOf(r,l),F=i.indexOf(n,l);break}var V=$(F);if(i.substring(D+1+V,D+1+V+w)===n){if(E.push(i.substring(l,D).replace(P,e)),G(D+1+V+w),z=i.indexOf(r,l),D=i.indexOf(e,l),b&&(H(),c))return W();if(a&&v.length>=a)return W(!0);break}M.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:v.length,index:l}),D++}}else D++}return B();function U(t){v.push(t),S=l}function $(t){var e=0;if(-1!==t){var r=i.substring(D+1,t);r&&""===r.trim()&&(e=r.length)}return e}function B(t){return m||(void 0===t&&(t=i.substring(l)),E.push(t),l=p,U(E),b&&H()),W()}function G(t){l=t,U(E),E=[],F=i.indexOf(n,l)}function W(t){return{data:v,errors:M,meta:{delimiter:r,linebreak:n,aborted:c,truncated:!!t,cursor:S+(f||0)}}}function H(){s(W()),v=[],M=[]}},this.abort=function(){c=!0},this.getCharIndex=function(){return l}}function d(t){var e=t.data,r=o[e.workerId],n=!1;if(e.error)r.userError(e.error,e.file);else if(e.results&&e.results.data){var s={abort:function(){n=!0,w(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:y,resume:y};if(x(r.userStep)){for(var i=0;i<e.results.data.length&&(r.userStep({data:e.results.data[i],errors:e.results.errors,meta:e.results.meta},s),!n);i++);delete e.results}else x(r.userChunk)&&(r.userChunk(e.results,s,e.file),delete e.results)}e.finished&&!n&&w(e.workerId,e.results)}function w(t,e){var r=o[t];x(r.userComplete)&&r.userComplete(e),r.terminate(),delete o[t]}function y(){throw new Error("Not implemented.")}function b(t){if("object"!=typeof t||null===t)return t;var e=Array.isArray(t)?[]:{};for(var r in t)e[r]=b(t[r]);return e}function v(t,e){return function(){t.apply(e,arguments)}}function x(t){return"function"==typeof t}return n&&(e.onmessage=function(t){var r=t.data;if(void 0===i.WORKER_ID&&r&&(i.WORKER_ID=r.workerId),"string"==typeof r.input)e.postMessage({workerId:i.WORKER_ID,results:i.parse(r.input,r.config),finished:!0});else if(e.File&&r.input instanceof File||r.input instanceof Object){var n=i.parse(r.input,r.config);n&&e.postMessage({workerId:i.WORKER_ID,results:n,finished:!0})}}),(h.prototype=Object.create(u.prototype)).constructor=h,(l.prototype=Object.create(u.prototype)).constructor=l,(c.prototype=Object.create(c.prototype)).constructor=c,(f.prototype=Object.create(u.prototype)).constructor=f,i},void 0===(n=r.apply(e,[]))||(t.exports=n)}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var s=e[n]={exports:{}};return t[n].call(s.exports,s,s.exports,r),s.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;r.g.importScripts&&(t=r.g.location+"");var e=r.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");if(n.length)for(var o=n.length-1;o>-1&&(!t||!/^http(s?):/.test(t));)t=n[o--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=t})(),(()=>{"use strict";function t(t,e){let r=0;for(let n=0;n<t.length;n++)r+=(t[n]-e[n])*(t[n]-e[n]);return r}const e={distanceFunction:t};function n(t,r,n=e){const o=n.distanceFunction||e.distanceFunction,s=n.similarityFunction||e.similarityFunction;let i=-1;if("function"==typeof s){let e=Number.MIN_VALUE;for(let n=0;n<t.length;n++){const o=s(r,t[n]);o>e&&(e=o,i=n)}}else{if("function"!=typeof o)throw new Error("A similarity or distance function it's required");{let e=Number.MAX_VALUE;for(let n=0;n<t.length;n++){const s=o(r,t[n]);s<e&&(e=s,i=n)}}}return i}function o(t,e,r,o){for(let s=0;s<t.length;s++)r[s]=n(e,t[s],{distanceFunction:o});return r}class s{constructor(t,e,r,n,o){this.clusters=t,this.centroids=e,this.converged=r,this.iterations=n,this.distance=o}nearest(t){const e=new Array(t.length);return o(t,this.centroids,e,this.distance)}computeInformation(t){let e=this.centroids.map((t=>({centroid:t,error:0,size:0})));for(let r=0;r<t.length;r++)e[this.clusters[r]].error+=this.distance(t[r],this.centroids[this.clusters[r]]),e[this.clusters[r]].size++;for(let t=0;t<this.centroids.length;t++){let r=e[t].error;e[t].size&&-1!==r?r/=e[t].size:e[t].error=-1}return e}}var i=r(868);i.y3,i.jy,i.oN,i.Hc,i.cg,i.hj,i.LU,i.Tb;const a=i.uq,u=(i.Zm,i.Dq,i.__,i.q0,i.lh,i.pI,i.zC,i.zg,i.g6,i.OL,i.ks,i.QR,i.jp,i.mk,i.W2,i.l,i.KY,i.dv,i.BR,i.Wu,i.uq,i.uq,i.a4,i.DI,i.Jo,i.Zi,i.kH,i.LV,1/16777216);function h(t,e){const r=65535&(t>>>=0);return((t-r)*(e>>>=0)>>>0)+r*e>>>0}class l{constructor(t=Date.now()){this.state=new Uint32Array(4),this.init(t),this.random=this.getFloat.bind(this)}getUint32(){return this.nextState(),this.state[3]+this.state[2]>>>0}getFloat(){return(this.getUint32()>>>8)*u}init(t){if(!Number.isInteger(t))throw new TypeError("seed must be an integer");this.state[0]=t,this.state[1]=0,this.state[2]=0,this.state[3]=0;for(let t=1;t<8;t++)this.state[3&t]^=t+h(1812433253,this.state[t-1&3]^this.state[t-1&3]>>>30>>>0)>>>0;this.periodCertification();for(let t=0;t<8;t++)this.nextState()}periodCertification(){0===this.state[0]&&0===this.state[1]&&0===this.state[2]&&0===this.state[3]&&(this.state[0]=88,this.state[1]=83,this.state[2]=65,this.state[3]=68)}nextState(){let t=this.state[0];t^=t<<15,t^=t>>>18,t^=this.state[3]<<11,this.state[0]=this.state[1],this.state[1]=this.state[2],this.state[2]=this.state[3],this.state[3]=t}}function c(t,e,r){const n=e();if(r){let t=0;for(;n>r[t];)t++;return t}return Math.floor(n*t)}class f{constructor(t=Math.random){if("number"==typeof t){const e=new l(t);this.randomGenerator=e.random}else this.randomGenerator=t}choice(t,e){return function(t,e={},r=Math.random){const{size:n=1,replace:o=!1,probabilities:s}=e;let i,a;if(i="number"==typeof t?function(t){const e=[];for(let r=0;r<t;r++)e.push(r);return e}(t):t.slice(),s){if(!o)throw new Error("choice with probabilities and no replacement is not implemented");if(s.length!==i.length)throw new Error("the length of probabilities option should be equal to the number of choices");a=[s[0]];for(let t=1;t<s.length;t++)a[t]=a[t-1]+s[t];if(Math.abs(1-a[a.length-1])>1e-8)throw new Error(`probabilities should sum to 1, but instead sums to ${a[a.length-1]}`)}if(!1===o&&n>i.length)throw new Error("size option is too large");const u=[];for(let t=0;t<n;t++){const t=c(i.length,r,a);u.push(i[t]),o||i.splice(t,1)}return u}(t,e,this.randomGenerator)}random(){return this.randomGenerator()}randInt(t,e){return void 0===e&&(e=t,t=0),t+Math.floor(this.randomGenerator()*(e-t))}randomSample(t){const e=[];for(let r=0;r<t;r++)e.push(this.random());return e}}function m(e,r){const n=new a(e.rows,r.rows);for(let o=0;o<e.rows;o++)for(let s=0;s<r.rows;s++)n.set(o,s,t(e.getRow(o),r.getRow(s)));return n}function g(t){let e=[];for(let r=0;r<t;r++)e.push(r);return e}function p(t){let e=[t[0]];for(let r=1;r<t.length;r++)e[r]=e[r-1]+t[r];return e}const d={maxIterations:100,tolerance:1e-6,initialization:"kmeans++",distanceFunction:t};function w(t,e,r,n,i,a){let u=function(t,e,r,n){const o=e[0].length;let s=new Array(n),i=new Array(n);for(let t=0;t<n;t++){s[t]=new Array(o),i[t]=0;for(let e=0;e<o;e++)s[t][e]=0}for(let t=0;t<e.length;t++){i[r[t]]++;for(let n=0;n<o;n++)s[r[t]][n]+=e[t][n]}for(let e=0;e<n;e++)for(let r=0;r<o;r++)i[e]?s[e][r]/=i[e]:s[e][r]=t[e][r];return s}(t,e,r=o(e,t,r,i.distanceFunction),n),h=function(t,e,r,n){for(let o=0;o<t.length;o++)if(r(t[o],e[o])>n)return!1;return!0}(u,t,i.distanceFunction,i.tolerance);return new s(r,u,h,a,i.distanceFunction)}function y(e,r,n){const o=function(t){return{...d,...t}}(n);!function(t,e){if(e<=0||e>t.length||!Number.isInteger(e))throw new Error("K should be a positive integer smaller than the number of points")}(e,r);let s=function(e,r,n){let o;if(Array.isArray(n.initialization)){if(n.initialization.length!==r)throw new Error("The initial centers should have the same length as K");o=n.initialization}else switch(n.initialization){case"kmeans++":o=function(e,r,n={}){const o=new a(e),s=o.rows,i=new f(n.seed),u=[],h=n.localTrials||2+Math.floor(Math.log(r)),l=i.randInt(s);u.push(o.getRow(l));let c=new a(1,o.rows);for(let e=0;e<o.rows;e++)c.set(0,e,t(o.getRow(e),u[0]));let d=[p(c.getRow(0))];const w=1/d[0][s-1];let y=a.mul(c,w);for(let t=1;t<r;t++){const e=i.choice(s,{replace:!0,size:h,probabilities:y.getRow(0)}),r=m(o.selection(e,g(o.columns)),o);let n=1/0,l=1/0,f=c;for(let t=0;t<h;t++){const o=a.min(c,[r.getRow(t)]),s=o.sum();s<l&&(n=e[t],l=s,f=o)}u[t]=o.getRow(n),c=f,d=[p(c.getRow(0))],y=a.mul(c,1/d[0][s-1])}return u}(e,r,n);break;case"random":o=function(t,e,r){return new f(r).choice(t,{size:e})}(e,r,n.seed);break;case"mostDistant":o=function(t,e,r,n){const o=new f(n);let s=new Array(e);if(s[0]=Math.floor(o.random()*t.length),e>1){let n={dist:-1,index:-1};for(let e=0;e<t.length;++e)r[s[0]][e]>n.dist&&(n.dist=r[s[0]][e],n.index=e);if(s[1]=n.index,e>2)for(let n=2;n<e;++n){let e={dist:-1,index:-1};for(let o=0;o<t.length;++o){let t={dist:Number.MAX_VALUE,index:-1};for(let e=0;e<n;++e)r[e][o]<t.dist&&!s.includes(o)&&(t={dist:r[e][o],index:o});t.dist!==Number.MAX_VALUE&&t.dist>e.dist&&(e={...t})}s[n]=e.index}}return s.map((e=>t[e]))}(e,r,function(t,e){let r=new Array(t.length);for(let n=0;n<t.length;++n)for(let o=n;o<t.length;++o){r[n]||(r[n]=new Array(t.length)),r[o]||(r[o]=new Array(t.length));const s=e(t[n],t[o]);r[n][o]=s,r[o][n]=s}return r}(e,n.distanceFunction),n.seed);break;default:!function(t){throw new Error(`${"Unknown initialization method"}: "${String(t)}"`)}(n.initialization)}return o}(e,r,o);0===o.maxIterations&&(o.maxIterations=Number.MAX_VALUE);let i,u=new Array(e.length),h=!1,l=0;for(;!h&&l<o.maxIterations;)i=w(s,e,u,r,o,++l),h=i.converged,s=i.centroids;if(!i)throw new Error("unreachable: no kmeans step executed");return i}var b=r(98),v=r.n(b);const x=r.p+"src/assets/data.csv";var M=r(779),E=r.n(M);function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function _(){_=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},s="function"==typeof Symbol?Symbol:{},i=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function h(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(t){h=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var s=e&&e.prototype instanceof w?e:w,i=Object.create(s.prototype),a=new L(n||[]);return o(i,"_invoke",{value:A(t,r,a)}),i}function c(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",m="suspendedYield",g="executing",p="completed",d={};function w(){}function y(){}function b(){}var v={};h(v,i,(function(){return this}));var x=Object.getPrototypeOf,M=x&&x(x(N([])));M&&M!==r&&n.call(M,i)&&(v=M);var E=b.prototype=w.prototype=Object.create(v);function k(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function R(t,e){function r(o,s,i,a){var u=c(t[o],t,s);if("throw"!==u.type){var h=u.arg,l=h.value;return l&&"object"==S(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,a)}),(function(t){r("throw",t,i,a)})):e.resolve(l).then((function(t){h.value=t,i(h)}),(function(t){return r("throw",t,i,a)}))}a(u.arg)}var s;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return s=s?s.then(o,o):o()}})}function A(e,r,n){var o=f;return function(s,i){if(o===g)throw Error("Generator is already running");if(o===p){if("throw"===s)throw i;return{value:t,done:!0}}for(n.method=s,n.arg=i;;){var a=n.delegate;if(a){var u=I(a,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=g;var h=c(e,r,n);if("normal"===h.type){if(o=n.done?p:m,h.arg===d)continue;return{value:h.arg,done:n.done}}"throw"===h.type&&(o=p,n.method="throw",n.arg=h.arg)}}}function I(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,I(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var s=c(o,e.iterator,r.arg);if("throw"===s.type)return r.method="throw",r.arg=s.arg,r.delegate=null,d;var i=s.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,d):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,s=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return s.next=s}}throw new TypeError(S(e)+" is not iterable")}return y.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=h(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,h(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(R.prototype),h(R.prototype,a,(function(){return this})),e.AsyncIterator=R,e.async=function(t,r,n,o,s){void 0===s&&(s=Promise);var i=new R(l(t,r,n,o),s);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},k(E),h(E,u,"Generator"),h(E,i,(function(){return this})),h(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var s=this.tryEntries.length-1;s>=0;--s){var i=this.tryEntries[s],a=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),h=n.call(i,"finallyLoc");if(u&&h){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!h)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var s=o;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var i=s?s.completion:{};return i.type=t,i.arg=e,s?(this.method="next",this.next=s.finallyLoc,d):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),d}},e}function k(t,e,r,n,o,s,i){try{var a=t[s](i),u=a.value}catch(t){return void r(t)}a.done?e(u):Promise.resolve(u).then(n,o)}const R=function(){var t,e=(t=_().mark((function t(){var e,r,n,o,s,i,a;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(x);case 3:return e=t.sent,t.next=6,e.text();case 6:return r=t.sent,n=v().parse(r,{header:!0}),o=n.data,s=/^[a-zA-Z.()\s"']+$/,i=o.filter((function(t){return s.test(t.Track)&&s.test(t.Artist)&&s.test(t["Album Name"])})),a=i.map((function(t){var e=Number(t["Amazon Playlist Count"].replace(/,/g,""))||0,r=Number(t["Deezer Playlist Count"].replace(/,/g,""))||0,n=Number(t["Spotify Playlist Count"].replace(/,/g,""))||0,o=t["Spotify Streams"]||"0",s=t["Release Date"].split("/"),i=parseInt(o.replace(/,/g,""),10);return{track:t.Track,features:[Number(s[2]),e,r,n],spotifyStreams:i,id:Number(E()()),artist:t.Artist,releaseDate:t["Release Date"],albumName:t["Album Name"],amazonPlaylistCount:e,deezerPlaylistCount:r,spotifyPlaylistCount:n}})),t.abrupt("return",a);case 15:t.prev=15,t.t0=t.catch(0),console.error("  :",t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,15]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var s=t.apply(e,r);function i(t){k(s,n,o,i,a,"next",t)}function a(t){k(s,n,o,i,a,"throw",t)}i(void 0)}))});return function(){return e.apply(this,arguments)}}(),A=function(t){var e=document.querySelector("canvas"),r=e.getContext("2d"),n=t.nodes,o=t.links,s=document.getElementById("tooltip"),i=function(){e.width=window.innerWidth,e.height=window.innerHeight};window.onresize=i,i();var a=function(t){return n.find((function(e){return e.id===t}))};o.forEach((function(t){var e=a(t.source),n=a(t.target);e&&n&&(r.beginPath(),r.moveTo(e.coordinates.x,e.coordinates.y),r.lineTo(n.coordinates.x,n.coordinates.y),r.strokeStyle=t.color,r.lineWidth=Math.max(1,5*t.value)/100,r.stroke())})),n.forEach((function(t){r.beginPath(),r.arc(t.coordinates.x,t.coordinates.y,t.size,0,2*Math.PI,!0),r.fillStyle=t.color,r.fill()}));var u=function(){r.clearRect(0,0,e.width,e.height),n.forEach((function(t){r.beginPath(),r.arc(t.coordinates.x,t.coordinates.y,t.size,0,2*Math.PI),r.fillStyle=t.highlighted?"red":t.color,r.fill(),r.stroke()}))};e.addEventListener("click",(function(t){var r,o,i,a=e.getBoundingClientRect(),h=t.clientX-a.left,l=t.clientY-a.top,c=n.find((function(t){return function(t,e,r){var n=t-r.coordinates.x,o=e-r.coordinates.y;return n*n+o*o<=r.size*r.size}(h,l,t)}));c?(r=c,o=h,i=l,s.style.display="block",s.innerHTML="\n      <strong>Track:</strong> ".concat(r.label,"<br>\n      <strong>Artist:</strong> ").concat(r.artist,"<br>\n      <strong>Album:</strong> ").concat(r.albumName,"<br>\n      <strong>Spotify Streams:</strong> ").concat(r.spotifyStreams,"<br>\n      <strong>Amazon Playlists:</strong> ").concat(r.amazonPlaylistCount,"<br>\n      <strong>Deezer Playlists:</strong> ").concat(r.deezerPlaylistCount,"<br>\n      <strong>Spotify Playlists:</strong> ").concat(r.spotifyPlaylistCount,"<br>\n      <strong>Release Date:</strong> ").concat(r.releaseDate,"\n    "),s.style.left="".concat(o+15,"px"),s.style.top="".concat(i+15,"px"),n.forEach((function(t){t.highlighted=t.id===c.id})),u()):(n.forEach((function(t){t.highlighted=!1,t.color="blue"})),u(),s.style.display="none")}))};function I(t){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}function C(){C=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},s="function"==typeof Symbol?Symbol:{},i=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function h(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(t){h=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var s=e&&e.prototype instanceof w?e:w,i=Object.create(s.prototype),a=new L(n||[]);return o(i,"_invoke",{value:k(t,r,a)}),i}function c(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",m="suspendedYield",g="executing",p="completed",d={};function w(){}function y(){}function b(){}var v={};h(v,i,(function(){return this}));var x=Object.getPrototypeOf,M=x&&x(x(N([])));M&&M!==r&&n.call(M,i)&&(v=M);var E=b.prototype=w.prototype=Object.create(v);function S(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,s,i,a){var u=c(t[o],t,s);if("throw"!==u.type){var h=u.arg,l=h.value;return l&&"object"==I(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,a)}),(function(t){r("throw",t,i,a)})):e.resolve(l).then((function(t){h.value=t,i(h)}),(function(t){return r("throw",t,i,a)}))}a(u.arg)}var s;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return s=s?s.then(o,o):o()}})}function k(e,r,n){var o=f;return function(s,i){if(o===g)throw Error("Generator is already running");if(o===p){if("throw"===s)throw i;return{value:t,done:!0}}for(n.method=s,n.arg=i;;){var a=n.delegate;if(a){var u=R(a,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=g;var h=c(e,r,n);if("normal"===h.type){if(o=n.done?p:m,h.arg===d)continue;return{value:h.arg,done:n.done}}"throw"===h.type&&(o=p,n.method="throw",n.arg=h.arg)}}}function R(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,R(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var s=c(o,e.iterator,r.arg);if("throw"===s.type)return r.method="throw",r.arg=s.arg,r.delegate=null,d;var i=s.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,d):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,s=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return s.next=s}}throw new TypeError(I(e)+" is not iterable")}return y.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=h(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,h(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},S(_.prototype),h(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,s){void 0===s&&(s=Promise);var i=new _(l(t,r,n,o),s);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},S(E),h(E,u,"Generator"),h(E,i,(function(){return this})),h(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var s=this.tryEntries.length-1;s>=0;--s){var i=this.tryEntries[s],a=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),h=n.call(i,"finallyLoc");if(u&&h){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!h)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var s=o;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var i=s?s.completion:{};return i.type=t,i.arg=e,s?(this.method="next",this.next=s.finallyLoc,d):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),d}},e}function T(t){return function(t){if(Array.isArray(t))return L(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return L(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function N(t,e,r,n,o,s,i){try{var a=t[s](i),u=a.value}catch(t){return void r(t)}a.done?e(u):Promise.resolve(u).then(n,o)}function O(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var s=t.apply(e,r);function i(t){N(s,n,o,i,a,"next",t)}function a(t){N(s,n,o,i,a,"throw",t)}i(void 0)}))}}var j=function(){var t=O(C().mark((function t(){var e,r,n,o,s,i,a;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=function(t,e,r,n,o){for(var s,i,a=!1;!a;){s=t+(Math.random()-.5)*r,i=e+(Math.random()-.5)*r;var u="".concat(s.toFixed(2),"-").concat(i.toFixed(2));o.has(u)||(o.set(u,n),a=!0)}return{x:s,y:i}},r=function(t,e,r,n,o){return n+(t-e)/(r-e)*(o-n)},n=function(t){var n=[],o=y(t.map((function(t){return t.features})),7),s=o.clusters,i=o.centroids,a=i.map((function(t){return t[0]})),u=i.map((function(t){return t[1]})),h=Math.min.apply(Math,T(a)),l=Math.max.apply(Math,T(a)),c=Math.min.apply(Math,T(u)),f=Math.max.apply(Math,T(u)),m=window.innerWidth,g=window.innerHeight,p=400,d=new Map,w=t.sort((function(t,e){return e.spotifyStreams-t.spotifyStreams}))[0].spotifyStreams;return t.forEach((function(t,o){var a=s[o],u=t.spotifyStreams,y=t.id,b=t.track,v=t.artist,x=t.releaseDate,M=t.albumName,E=t.amazonPlaylistCount,S=t.deezerPlaylistCount,_=t.spotifyPlaylistCount,k=(u/w).toFixed(3),R=r(i[a][0],h,l,p,m-p),A=r(i[a][1],c,f,p,g-p),I=Math.max(2,10*k),C=e(R,A,700,a,d),T=C.x,L=C.y;n.push({id:y.toString(),label:b,size:I,color:"#00f",artist:v,releaseDate:x,spotifyStreams:u,albumName:M,amazonPlaylistCount:E,deezerPlaylistCount:S,spotifyPlaylistCount:_,coordinates:{x:T,y:L}})})),n},o=function(t,e){return t.reduce((function(t,r,n){return t+r*e[n]}),0)/(Math.sqrt(t.reduce((function(t,e){return t+e*e}),0))*Math.sqrt(e.reduce((function(t,e){return t+e*e}),0)))},s=function(t){for(var e=[],r=0;r<t.length;r++)for(var n=r+1;n<t.length;n++){var s=t[r].features,i=t[n].features,a=o(s,i);a>.99999999&&e.push({source:t[r].id.toString(),target:t[n].id.toString(),value:a,color:"rgba(0, 0, 0, ".concat(a,")")})}return e},i=function(){var t=O(C().mark((function t(){var e,r,o;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R();case 2:return e=t.sent,r=n(e),o=s(e),t.abrupt("return",{nodes:r,links:o});case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=8,i();case 8:a=t.sent,A(a);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();j()})()})();